"use strict";
(self["webpackChunkwebpack_demo"] = self["webpackChunkwebpack_demo"] || []).push([["renderer"],{

/***/ 426:
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/style.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/sourceMaps.js */ 537);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ 645);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "* {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n\r\n/* html,\r\nbody {\r\n    overflow: hidden;\r\n} */\r\n\r\n.webgl {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    outline: none;\r\n}\r\n\r\n.word {\r\n    display: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    color: #ffeded;\r\n\r\n    position: relative;\r\n\r\n}\r\n\r\nbody {\r\n    -moz-user-select: none;\r\n    /*火狐*/\r\n    -webkit-user-select: none;\r\n    /*webkit浏览器*/\r\n    -ms-user-select: none;\r\n    /*IE10*/\r\n    -khtml-user-select: none;\r\n    /*早期浏览器*/\r\n    user-select: none;\r\n}", "",{"version":3,"sources":["webpack://./src/style.css"],"names":[],"mappings":"AAAA;IACI,SAAS;IACT,UAAU;AACd;;;AAGA;;;GAGG;;AAEH;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,aAAa;AACjB;;AAEA;IACI,cAAc;IACd,MAAM;IACN,OAAO;IACP,cAAc;;IAEd,kBAAkB;;AAEtB;;AAEA;IACI,sBAAsB;IACtB,KAAK;IACL,yBAAyB;IACzB,YAAY;IACZ,qBAAqB;IACrB,OAAO;IACP,wBAAwB;IACxB,QAAQ;IACR,iBAAiB;AACrB","sourcesContent":["* {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n\r\n/* html,\r\nbody {\r\n    overflow: hidden;\r\n} */\r\n\r\n.webgl {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    outline: none;\r\n}\r\n\r\n.word {\r\n    display: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    color: #ffeded;\r\n\r\n    position: relative;\r\n\r\n}\r\n\r\nbody {\r\n    -moz-user-select: none;\r\n    /*火狐*/\r\n    -webkit-user-select: none;\r\n    /*webkit浏览器*/\r\n    -ms-user-select: none;\r\n    /*IE10*/\r\n    -khtml-user-select: none;\r\n    /*早期浏览器*/\r\n    user-select: none;\r\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 654:
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ 379);
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ 795);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ 569);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ 565);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ 216);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ 589);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./style.css */ 426);

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ 438:
/*!***********************!*\
  !*** ./src/Canvas.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style.css */ 654);
/* harmony import */ var _Experience_Experience__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Experience/Experience */ 387);
// All rights reserved by Yon
// Canvas.js 
// Manager the THREE.js Renderer





const element = document.createElement("div");
const eCanvas = document.createElement("canvas");
eCanvas.className = "webgl";
element.appendChild(eCanvas);

const experience = new _Experience_Experience__WEBPACK_IMPORTED_MODULE_1__["default"](eCanvas);
  
document.body.insertBefore(element, document.body.children[0]);


/***/ }),

/***/ 119:
/*!**********************************!*\
  !*** ./src/Experience/Camera.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Camera)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ 477);
/* harmony import */ var _Override_OrbitControls__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Override/OrbitControls */ 664);
/* harmony import */ var _Experience__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Experience */ 387);
// All rights reserved by Yon
// Camera.js 
// Manager the camera control
// here use the OrbitControls form THREE.js and override it with zoon scale customization







class Camera {
    constructor() {
        this.experience = new _Experience__WEBPACK_IMPORTED_MODULE_1__["default"]()
        this.sizes = this.experience.sizes
        this.scene = this.experience.scene
        this.canvas = this.experience.canvas

        this.setInstance()
        this.setOrbitControl()
    }

    setInstance() {
        this.instance = new three__WEBPACK_IMPORTED_MODULE_2__.PerspectiveCamera(
            60,
            this.sizes.width / this.sizes.height,
            0.1,
            1000
        )
        this.instance.position.set(0, 51.9615, 30)
        this.scene.add(this.instance)
    }

    setOrbitControl() {
        this.controls = new _Override_OrbitControls__WEBPACK_IMPORTED_MODULE_0__.OrbitControls(this.instance, this.canvas)
        this.controls.enableDamping = true
        this.controls.dampingFactor = 0.2
        this.controls.screenSpacePanning = false

        this.controls.mouseButtons = {
            RIGHT: three__WEBPACK_IMPORTED_MODULE_2__.MOUSE.ROTATE,
            MIDDLE: three__WEBPACK_IMPORTED_MODULE_2__.MOUSE.DOLLY,
            LEFT: three__WEBPACK_IMPORTED_MODULE_2__.MOUSE.PAN,
        }


        this.controls.maxDistance = 120
        this.controls.minDistance = 30

        this.controls.enableRotate = true
        this.controls.minAzimuthAngle = -Math.PI / 3
        this.controls.maxAzimuthAngle = Math.PI / 3
        this.controls.minPolarAngle = Math.PI/12
        this.controls.maxPolarAngle = Math.PI/4

        this.controls.zoomSpeed = 0.5

        this.controls.minPanBox = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(-95,0,-66)
        this.controls.maxPanBox = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(95,0,66)
        this.controls.limitPan = true

    }

    resize() {
        this.instance.aspect = this.sizes.width / this.sizes.height
        this.instance.updateProjectionMatrix()
    }

    update() {
        this.controls.update()

    }
}


/***/ }),

/***/ 387:
/*!**************************************!*\
  !*** ./src/Experience/Experience.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Experience)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! three */ 477);
/* harmony import */ var _Camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Camera */ 119);
/* harmony import */ var _Renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Renderer */ 903);
/* harmony import */ var _Utils_Sizes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Utils/Sizes */ 803);
/* harmony import */ var _Utils_Time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Utils/Time */ 619);
/* harmony import */ var _World_World__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./World/World */ 336);
/* harmony import */ var _Utils_Debug__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Utils/Debug */ 173);
/* harmony import */ var _Utils_Resources__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Utils/Resources */ 82);
/* harmony import */ var _sources__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./sources */ 780);
// All rights reserved by Yon
// Experience.js 
// Manager all classes load and dispose
// Manager tick resize event












let instance = null

class Experience {
    constructor(canvas) {
        if (instance) {
            return instance
        }

        instance = this

        window.experience = this

        this.canvas = canvas

        this.debug = new _Utils_Debug__WEBPACK_IMPORTED_MODULE_5__["default"]()
        this.sizes = new _Utils_Sizes__WEBPACK_IMPORTED_MODULE_2__["default"]()
        this.time = new _Utils_Time__WEBPACK_IMPORTED_MODULE_3__["default"]()
        this.scene = new three__WEBPACK_IMPORTED_MODULE_8__.Scene()
        this.resources = new _Utils_Resources__WEBPACK_IMPORTED_MODULE_6__["default"](_sources__WEBPACK_IMPORTED_MODULE_7__["default"])
        this.camera = new _Camera__WEBPACK_IMPORTED_MODULE_0__["default"]()
        this.renderer = new _Renderer__WEBPACK_IMPORTED_MODULE_1__["default"]()
        this.world = new _World_World__WEBPACK_IMPORTED_MODULE_4__["default"]()

        this.sizes.on("resize", () => {
            this.resize()
        })

        this.time.on("tick", () => {
            this.update()
        })
    }

    resize() {
        this.camera.resize()
        this.renderer.resize()
    }

    update() {
        this.camera.update()
        this.world.update()
        this.renderer.update()
    }

    destroy() {
        this.sizes.off('resize')
        this.time.off('tick')

        this.scene.traverse((child)=>{
            if(child instanceof three__WEBPACK_IMPORTED_MODULE_8__.Mesh){
                child.geometry.dispose()
                for(const key in child.material){
                    const value = child.material[key]
                    if(value && typeof value.dispose === 'function'){
                        value.dispose()
                    }
                }
            }
        })

        this.camera.controls.dispose()
        this.renderer.instance.dispose()
    }
}


/***/ }),

/***/ 664:
/*!**************************************************!*\
  !*** ./src/Experience/Override/OrbitControls.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OrbitControls": () => (/* binding */ OrbitControls),
/* harmony export */   "MapControls": () => (/* binding */ MapControls)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ 477);


// This set of controls performs orbiting, dollying (zooming), and panning.
// Unlike TrackballControls, it maintains the "up" direction object.up (+Y by default).
//
//    Orbit - left mouse / touch: one-finger move
//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish
//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move

const _changeEvent = { type: 'change' };
const _startEvent = { type: 'start' };
const _endEvent = { type: 'end' };

class OrbitControls extends three__WEBPACK_IMPORTED_MODULE_0__.EventDispatcher {

	constructor( object, domElement ) {

		super();

		if ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter "domElement" is now mandatory.' );
		if ( domElement === document ) console.error( 'THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.' );

		this.object = object;
		this.domElement = domElement;
		this.domElement.style.touchAction = 'none'; // disable touch scroll

		// Set to false to disable this control
		this.enabled = true;

		// "target" sets the location of focus, where the object orbits around
		this.target = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();

		// How far you can dolly in and out ( PerspectiveCamera only )
		this.minDistance = 0;
		this.maxDistance = Infinity;

		// How far you can zoom in and out ( OrthographicCamera only )
		this.minZoom = 0;
		this.maxZoom = Infinity;

		// How far you can orbit vertically, upper and lower limits.
		// Range is 0 to Math.PI radians.
		this.minPolarAngle = 0; // radians
		this.maxPolarAngle = Math.PI; // radians

		// How far you can orbit horizontally, upper and lower limits.
		// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )
		this.minAzimuthAngle = - Infinity; // radians
		this.maxAzimuthAngle = Infinity; // radians


		// Set to true to enable damping (inertia)
		// If damping is enabled, you must call controls.update() in your animation loop
		this.enableDamping = false;
		this.dampingFactor = 0.05;

		// This option actually enables dollying in and out; left as "zoom" for backwards compatibility.
		// Set to false to disable zooming
		this.enableZoom = true;
		this.zoomSpeed = 1.0;

		// Set to false to disable rotating
		this.enableRotate = true;
		this.rotateSpeed = 1.0;

		// Set to false to disable panning
		this.enablePan = true;
		this.panSpeed = 1.0;
		this.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up
		this.keyPanSpeed = 7.0;	// pixels moved per arrow key push

        //yonjiang add 2022 03 29
        this.limitPan = false;
        this.minPanBox = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3( - 20, - 20, - 20 )
        this.maxPanBox = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3( 20, 20, 20 )
        //yonjiang end 2022 03 29

		// Set to true to automatically rotate around the target
		// If auto-rotate is enabled, you must call controls.update() in your animation loop
		this.autoRotate = false;
		this.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60

		// The four arrow keys
		this.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };

		// Mouse buttons
		this.mouseButtons = { LEFT: three__WEBPACK_IMPORTED_MODULE_0__.MOUSE.ROTATE, MIDDLE: three__WEBPACK_IMPORTED_MODULE_0__.MOUSE.DOLLY, RIGHT: three__WEBPACK_IMPORTED_MODULE_0__.MOUSE.PAN };

		// Touch fingers
		this.touches = { ONE: three__WEBPACK_IMPORTED_MODULE_0__.TOUCH.ROTATE, TWO: three__WEBPACK_IMPORTED_MODULE_0__.TOUCH.DOLLY_PAN };

		// for reset
		this.target0 = this.target.clone();
		this.position0 = this.object.position.clone();
		this.zoom0 = this.object.zoom;

		// the target DOM element for key events
		this._domElementKeyEvents = null;

		//
		// public methods
		//

		this.getPolarAngle = function () {

			return spherical.phi;

		};

		this.getAzimuthalAngle = function () {

			return spherical.theta;

		};

		this.getDistance = function () {

			return this.object.position.distanceTo( this.target );

		};

		this.listenToKeyEvents = function ( domElement ) {

			domElement.addEventListener( 'keydown', onKeyDown );
			this._domElementKeyEvents = domElement;

		};

		this.saveState = function () {

			scope.target0.copy( scope.target );
			scope.position0.copy( scope.object.position );
			scope.zoom0 = scope.object.zoom;

		};

		this.reset = function () {

			scope.target.copy( scope.target0 );
			scope.object.position.copy( scope.position0 );
			scope.object.zoom = scope.zoom0;

			scope.object.updateProjectionMatrix();
			scope.dispatchEvent( _changeEvent );

			scope.update();

			state = STATE.NONE;

		};

		// this method is exposed, but perhaps it would be better if we can make it private...
		this.update = function () {

			const offset = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();

			// so camera.up is the orbit axis
			const quat = new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion().setFromUnitVectors( object.up, new three__WEBPACK_IMPORTED_MODULE_0__.Vector3( 0, 1, 0 ) );
			const quatInverse = quat.clone().invert();

			const lastPosition = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();
			const lastQuaternion = new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion();

			const twoPI = 2 * Math.PI;

			return function update() {

				const position = scope.object.position;

				offset.copy( position ).sub( scope.target );

				// rotate offset to "y-axis-is-up" space
				offset.applyQuaternion( quat );

				// angle from z-axis around y-axis
				spherical.setFromVector3( offset );

				if ( scope.autoRotate && state === STATE.NONE ) {

					rotateLeft( getAutoRotationAngle() );

				}

				if ( scope.enableDamping ) {

					spherical.theta += sphericalDelta.theta * scope.dampingFactor;
					spherical.phi += sphericalDelta.phi * scope.dampingFactor;

				} else {

					spherical.theta += sphericalDelta.theta;
					spherical.phi += sphericalDelta.phi;

				}

				// restrict theta to be between desired limits

				let min = scope.minAzimuthAngle;
				let max = scope.maxAzimuthAngle;

				if ( isFinite( min ) && isFinite( max ) ) {

					if ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;

					if ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;

					if ( min <= max ) {

						spherical.theta = Math.max( min, Math.min( max, spherical.theta ) );

					} else {

						spherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?
							Math.max( min, spherical.theta ) :
							Math.min( max, spherical.theta );

					}

				}

				// restrict phi to be between desired limits
				spherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );

				spherical.makeSafe();


				spherical.radius *= scale;

				// restrict radius to be between desired limits
				spherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );

				// move target to panned location

                


				if ( scope.enableDamping === true ) {

					scope.target.addScaledVector( panOffset, scope.dampingFactor );

				} else {

					scope.target.add( panOffset );
				}

                //yonjiang add 2022 03 29
                if(this.limitPan === true) {
                    const offset = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3()
                    const position = scope.object.position;
                    offset.copy( position ).sub( scope.target );
                    let targetDistance = offset.length();
                    // let limitScale = 0

                    // if(this.enableDamping === true) {
                        limitPanScale = (this.maxDistance-targetDistance)/(this.maxDistance-this.minDistance)
                        
                        let min = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();
                        min.copy(this.minPanBox)
                        let max = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();
                        max.copy(this.maxPanBox)

                        scope.target.clamp(min.multiplyScalar(limitPanScale),max.multiplyScalar(limitPanScale));

                    // }else{
                        
                    //     limitPanScale = (this.maxDistance-targetDistance)/(this.maxDistance-this.minDistance)

                    //     let min = new Vector3();
                    //     min.copy(this.minPanBox)
                    //     let max = new Vector3();
                    //     max.copy(this.maxPanBox)
                    //     scope.target.clamp(min.multiplyScalar(limitPanScale),max.multiplyScalar(limitPanScale));
                    //     limitPanScale = 0;
                    // }
                }
                //yonjiang end 2022 03 29

				offset.setFromSpherical( spherical );

				// rotate offset back to "camera-up-vector-is-up" space
				offset.applyQuaternion( quatInverse );

				position.copy( scope.target ).add( offset );

				scope.object.lookAt( scope.target );

				if ( scope.enableDamping === true ) {

					sphericalDelta.theta *= ( 1 - scope.dampingFactor );
					sphericalDelta.phi *= ( 1 - scope.dampingFactor );

					panOffset.multiplyScalar( 1 - scope.dampingFactor );

				} else {

					sphericalDelta.set( 0, 0, 0 );

					panOffset.set( 0, 0, 0 );

				}

				scale = 1;

				// update condition is:
				// min(camera displacement, camera rotation in radians)^2 > EPS
				// using small-angle approximation cos(x/2) = 1 - x^2 / 8

				if ( zoomChanged ||
					lastPosition.distanceToSquared( scope.object.position ) > EPS ||
					8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {

					scope.dispatchEvent( _changeEvent );

					lastPosition.copy( scope.object.position );
					lastQuaternion.copy( scope.object.quaternion );
					zoomChanged = false;

					return true;

				}

				return false;

			};

		}();

		this.dispose = function () {

			scope.domElement.removeEventListener( 'contextmenu', onContextMenu );

			scope.domElement.removeEventListener( 'pointerdown', onPointerDown );
			scope.domElement.removeEventListener( 'pointercancel', onPointerCancel );
			scope.domElement.removeEventListener( 'wheel', onMouseWheel );

			scope.domElement.removeEventListener( 'pointermove', onPointerMove );
			scope.domElement.removeEventListener( 'pointerup', onPointerUp );


			if ( scope._domElementKeyEvents !== null ) {

				scope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );

			}

			//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?

		};

		//
		// internals
		//

		const scope = this;

		const STATE = {
			NONE: - 1,
			ROTATE: 0,
			DOLLY: 1,
			PAN: 2,
			TOUCH_ROTATE: 3,
			TOUCH_PAN: 4,
			TOUCH_DOLLY_PAN: 5,
			TOUCH_DOLLY_ROTATE: 6
		};

		let state = STATE.NONE;

		const EPS = 0.000001;

		// current position in spherical coordinates
		const spherical = new three__WEBPACK_IMPORTED_MODULE_0__.Spherical();
		const sphericalDelta = new three__WEBPACK_IMPORTED_MODULE_0__.Spherical();

		let scale = 1;
		const panOffset = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();
		let zoomChanged = false;

		const rotateStart = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();
		const rotateEnd = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();
		const rotateDelta = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();

		const panStart = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();
		const panEnd = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();
		const panDelta = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();

		const dollyStart = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();
		const dollyEnd = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();
		const dollyDelta = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();

		const pointers = [];
		const pointerPositions = {};

        let limitPanScale = 1;

		function getAutoRotationAngle() {

			return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;

		}

		function getZoomScale() {

			return Math.pow( 0.95, scope.zoomSpeed );

		}

		function rotateLeft( angle ) {

			sphericalDelta.theta -= angle;

		}

		function rotateUp( angle ) {

			sphericalDelta.phi -= angle;

		}

		const panLeft = function () {

			const v = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();

			return function panLeft( distance, objectMatrix ) {

				v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix
				v.multiplyScalar( - distance );

				panOffset.add( v );

			};

		}();

		const panUp = function () {

			const v = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();

			return function panUp( distance, objectMatrix ) {

				if ( scope.screenSpacePanning === true ) {

					v.setFromMatrixColumn( objectMatrix, 1 );

				} else {

					v.setFromMatrixColumn( objectMatrix, 0 );
					v.crossVectors( scope.object.up, v );

				}
                
				v.multiplyScalar( distance );
				panOffset.add( v );

			};

		}();

		// deltaX and deltaY are in pixels; right and down are positive
		const pan = function () {

			const offset = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();

			return function pan( deltaX, deltaY ) {

				const element = scope.domElement;

				if ( scope.object.isPerspectiveCamera ) {

					// perspective
					const position = scope.object.position;
					offset.copy( position ).sub( scope.target );
					let targetDistance = offset.length();

					// half of the fov is center to top of screen
					targetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );

					// we use only clientHeight here so aspect ratio does not distort speed
					panLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );
					panUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );

				} else if ( scope.object.isOrthographicCamera ) {

					// orthographic
					panLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );
					panUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );

				} else {

					// camera neither orthographic nor perspective
					console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );
					scope.enablePan = false;

				}

			};

		}();

		function dollyOut( dollyScale ) {

			if ( scope.object.isPerspectiveCamera ) {

				scale /= dollyScale;

			} else if ( scope.object.isOrthographicCamera ) {

				scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );
				scope.object.updateProjectionMatrix();
				zoomChanged = true;

			} else {

				console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );
				scope.enableZoom = false;

			}

		}

		function dollyIn( dollyScale ) {

			if ( scope.object.isPerspectiveCamera ) {

				scale *= dollyScale;

			} else if ( scope.object.isOrthographicCamera ) {

				scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );
				scope.object.updateProjectionMatrix();
				zoomChanged = true;

			} else {

				console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );
				scope.enableZoom = false;

			}

		}

		//
		// event callbacks - update the object state
		//

		function handleMouseDownRotate( event ) {

			rotateStart.set( event.clientX, event.clientY );

		}

		function handleMouseDownDolly( event ) {

			dollyStart.set( event.clientX, event.clientY );

		}

		function handleMouseDownPan( event ) {

			panStart.set( event.clientX, event.clientY );

		}

		function handleMouseMoveRotate( event ) {

			rotateEnd.set( event.clientX, event.clientY );

			rotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );

			const element = scope.domElement;

			rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height

			rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );

			rotateStart.copy( rotateEnd );

			scope.update();

		}

		function handleMouseMoveDolly( event ) {

			dollyEnd.set( event.clientX, event.clientY );

			dollyDelta.subVectors( dollyEnd, dollyStart );

			if ( dollyDelta.y > 0 ) {

				dollyOut( getZoomScale() );

			} else if ( dollyDelta.y < 0 ) {

				dollyIn( getZoomScale() );

			}

			dollyStart.copy( dollyEnd );

			scope.update();

		}

		function handleMouseMovePan( event ) {

			panEnd.set( event.clientX, event.clientY );

			panDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );

			pan( panDelta.x, panDelta.y );

			panStart.copy( panEnd );

			scope.update();

		}

		function handleMouseWheel( event ) {

			if ( event.deltaY < 0 ) {

				dollyIn( getZoomScale() );

			} else if ( event.deltaY > 0 ) {

				dollyOut( getZoomScale() );

			}

			scope.update();

		}

		function handleKeyDown( event ) {

			let needsUpdate = false;

			switch ( event.code ) {

				case scope.keys.UP:
					pan( 0, scope.keyPanSpeed );
					needsUpdate = true;
					break;

				case scope.keys.BOTTOM:
					pan( 0, - scope.keyPanSpeed );
					needsUpdate = true;
					break;

				case scope.keys.LEFT:
					pan( scope.keyPanSpeed, 0 );
					needsUpdate = true;
					break;

				case scope.keys.RIGHT:
					pan( - scope.keyPanSpeed, 0 );
					needsUpdate = true;
					break;

			}

			if ( needsUpdate ) {

				// prevent the browser from scrolling on cursor keys
				event.preventDefault();

				scope.update();

			}


		}

		function handleTouchStartRotate() {

			if ( pointers.length === 1 ) {

				rotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );

			} else {

				const x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );
				const y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );

				rotateStart.set( x, y );

			}

		}

		function handleTouchStartPan() {

			if ( pointers.length === 1 ) {

				panStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );

			} else {

				const x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );
				const y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );

				panStart.set( x, y );

			}

		}

		function handleTouchStartDolly() {

			const dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;
			const dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;

			const distance = Math.sqrt( dx * dx + dy * dy );

			dollyStart.set( 0, distance );

		}

		function handleTouchStartDollyPan() {

			if ( scope.enableZoom ) handleTouchStartDolly();

			if ( scope.enablePan ) handleTouchStartPan();

		}

		function handleTouchStartDollyRotate() {

			if ( scope.enableZoom ) handleTouchStartDolly();

			if ( scope.enableRotate ) handleTouchStartRotate();

		}

		function handleTouchMoveRotate( event ) {

			if ( pointers.length == 1 ) {

				rotateEnd.set( event.pageX, event.pageY );

			} else {

				const position = getSecondPointerPosition( event );

				const x = 0.5 * ( event.pageX + position.x );
				const y = 0.5 * ( event.pageY + position.y );

				rotateEnd.set( x, y );

			}

			rotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );

			const element = scope.domElement;

			rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height

			rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );

			rotateStart.copy( rotateEnd );

		}

		function handleTouchMovePan( event ) {

			if ( pointers.length === 1 ) {

				panEnd.set( event.pageX, event.pageY );

			} else {

				const position = getSecondPointerPosition( event );

				const x = 0.5 * ( event.pageX + position.x );
				const y = 0.5 * ( event.pageY + position.y );

				panEnd.set( x, y );

			}

			panDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );

			pan( panDelta.x, panDelta.y );

			panStart.copy( panEnd );

		}

		function handleTouchMoveDolly( event ) {

			const position = getSecondPointerPosition( event );

			const dx = event.pageX - position.x;
			const dy = event.pageY - position.y;

			const distance = Math.sqrt( dx * dx + dy * dy );

			dollyEnd.set( 0, distance );

			dollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );

			dollyOut( dollyDelta.y );

			dollyStart.copy( dollyEnd );

		}

		function handleTouchMoveDollyPan( event ) {

			if ( scope.enableZoom ) handleTouchMoveDolly( event );

			if ( scope.enablePan ) handleTouchMovePan( event );

		}

		function handleTouchMoveDollyRotate( event ) {

			if ( scope.enableZoom ) handleTouchMoveDolly( event );

			if ( scope.enableRotate ) handleTouchMoveRotate( event );

		}

		//
		// event handlers - FSM: listen for events and reset state
		//

		function onPointerDown( event ) {

			if ( scope.enabled === false ) return;

			if ( pointers.length === 0 ) {

				scope.domElement.setPointerCapture( event.pointerId );

				scope.domElement.addEventListener( 'pointermove', onPointerMove );
				scope.domElement.addEventListener( 'pointerup', onPointerUp );

			}

			//

			addPointer( event );

			if ( event.pointerType === 'touch' ) {

				onTouchStart( event );

			} else {

				onMouseDown( event );

			}

		}

		function onPointerMove( event ) {

			if ( scope.enabled === false ) return;

			if ( event.pointerType === 'touch' ) {

				onTouchMove( event );

			} else {

				onMouseMove( event );

			}

		}

		function onPointerUp( event ) {

		    removePointer( event );

		    if ( pointers.length === 0 ) {

		        scope.domElement.releasePointerCapture( event.pointerId );

		        scope.domElement.removeEventListener( 'pointermove', onPointerMove );
		        scope.domElement.removeEventListener( 'pointerup', onPointerUp );

		    }

		    scope.dispatchEvent( _endEvent );

		    state = STATE.NONE;

		}

		function onPointerCancel( event ) {

			removePointer( event );

		}

		function onMouseDown( event ) {

			let mouseAction;

			switch ( event.button ) {

				case 0:

					mouseAction = scope.mouseButtons.LEFT;
					break;

				case 1:

					mouseAction = scope.mouseButtons.MIDDLE;
					break;

				case 2:

					mouseAction = scope.mouseButtons.RIGHT;
					break;

				default:

					mouseAction = - 1;

			}

			switch ( mouseAction ) {

				case three__WEBPACK_IMPORTED_MODULE_0__.MOUSE.DOLLY:

					if ( scope.enableZoom === false ) return;

					handleMouseDownDolly( event );

					state = STATE.DOLLY;

					break;

				case three__WEBPACK_IMPORTED_MODULE_0__.MOUSE.ROTATE:

					if ( event.ctrlKey || event.metaKey || event.shiftKey ) {

						if ( scope.enablePan === false ) return;

						handleMouseDownPan( event );

						state = STATE.PAN;

					} else {

						if ( scope.enableRotate === false ) return;

						handleMouseDownRotate( event );

						state = STATE.ROTATE;

					}

					break;

				case three__WEBPACK_IMPORTED_MODULE_0__.MOUSE.PAN:

					if ( event.ctrlKey || event.metaKey || event.shiftKey ) {

						if ( scope.enableRotate === false ) return;

						handleMouseDownRotate( event );

						state = STATE.ROTATE;

					} else {

						if ( scope.enablePan === false ) return;

						handleMouseDownPan( event );

						state = STATE.PAN;

					}

					break;

				default:

					state = STATE.NONE;

			}

			if ( state !== STATE.NONE ) {

				scope.dispatchEvent( _startEvent );

			}

		}

		function onMouseMove( event ) {

			if ( scope.enabled === false ) return;

			switch ( state ) {

				case STATE.ROTATE:

					if ( scope.enableRotate === false ) return;

					handleMouseMoveRotate( event );

					break;

				case STATE.DOLLY:

					if ( scope.enableZoom === false ) return;

					handleMouseMoveDolly( event );

					break;

				case STATE.PAN:

					if ( scope.enablePan === false ) return;

					handleMouseMovePan( event );

					break;

			}

		}

		function onMouseWheel( event ) {

			if ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;

			event.preventDefault();

			scope.dispatchEvent( _startEvent );

			handleMouseWheel( event );

			scope.dispatchEvent( _endEvent );

		}

		function onKeyDown( event ) {

			if ( scope.enabled === false || scope.enablePan === false ) return;

			handleKeyDown( event );

		}

		function onTouchStart( event ) {

			trackPointer( event );

			switch ( pointers.length ) {

				case 1:

					switch ( scope.touches.ONE ) {

						case three__WEBPACK_IMPORTED_MODULE_0__.TOUCH.ROTATE:

							if ( scope.enableRotate === false ) return;

							handleTouchStartRotate();

							state = STATE.TOUCH_ROTATE;

							break;

						case three__WEBPACK_IMPORTED_MODULE_0__.TOUCH.PAN:

							if ( scope.enablePan === false ) return;

							handleTouchStartPan();

							state = STATE.TOUCH_PAN;

							break;

						default:

							state = STATE.NONE;

					}

					break;

				case 2:

					switch ( scope.touches.TWO ) {

						case three__WEBPACK_IMPORTED_MODULE_0__.TOUCH.DOLLY_PAN:

							if ( scope.enableZoom === false && scope.enablePan === false ) return;

							handleTouchStartDollyPan();

							state = STATE.TOUCH_DOLLY_PAN;

							break;

						case three__WEBPACK_IMPORTED_MODULE_0__.TOUCH.DOLLY_ROTATE:

							if ( scope.enableZoom === false && scope.enableRotate === false ) return;

							handleTouchStartDollyRotate();

							state = STATE.TOUCH_DOLLY_ROTATE;

							break;

						default:

							state = STATE.NONE;

					}

					break;

				default:

					state = STATE.NONE;

			}

			if ( state !== STATE.NONE ) {

				scope.dispatchEvent( _startEvent );

			}

		}

		function onTouchMove( event ) {

			trackPointer( event );

			switch ( state ) {

				case STATE.TOUCH_ROTATE:

					if ( scope.enableRotate === false ) return;

					handleTouchMoveRotate( event );

					scope.update();

					break;

				case STATE.TOUCH_PAN:

					if ( scope.enablePan === false ) return;

					handleTouchMovePan( event );

					scope.update();

					break;

				case STATE.TOUCH_DOLLY_PAN:

					if ( scope.enableZoom === false && scope.enablePan === false ) return;

					handleTouchMoveDollyPan( event );

					scope.update();

					break;

				case STATE.TOUCH_DOLLY_ROTATE:

					if ( scope.enableZoom === false && scope.enableRotate === false ) return;

					handleTouchMoveDollyRotate( event );

					scope.update();

					break;

				default:

					state = STATE.NONE;

			}

		}

		function onContextMenu( event ) {

			if ( scope.enabled === false ) return;

			event.preventDefault();

		}

		function addPointer( event ) {

			pointers.push( event );

		}

		function removePointer( event ) {

			delete pointerPositions[ event.pointerId ];

			for ( let i = 0; i < pointers.length; i ++ ) {

				if ( pointers[ i ].pointerId == event.pointerId ) {

					pointers.splice( i, 1 );
					return;

				}

			}

		}

		function trackPointer( event ) {

			let position = pointerPositions[ event.pointerId ];

			if ( position === undefined ) {

				position = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2();
				pointerPositions[ event.pointerId ] = position;

			}

			position.set( event.pageX, event.pageY );

		}

		function getSecondPointerPosition( event ) {

			const pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];

			return pointerPositions[ pointer.pointerId ];

		}

		//

		scope.domElement.addEventListener( 'contextmenu', onContextMenu );

		scope.domElement.addEventListener( 'pointerdown', onPointerDown );
		scope.domElement.addEventListener( 'pointercancel', onPointerCancel );
		scope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );

		// force an update at start

		this.update();

	}

}


// This set of controls performs orbiting, dollying (zooming), and panning.
// Unlike TrackballControls, it maintains the "up" direction object.up (+Y by default).
// This is very similar to OrbitControls, another set of touch behavior
//
//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate
//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish
//    Pan - left mouse, or arrow keys / touch: one-finger move

class MapControls extends OrbitControls {

	constructor( object, domElement ) {

		super( object, domElement );

		this.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up

		this.mouseButtons.LEFT = three__WEBPACK_IMPORTED_MODULE_0__.MOUSE.PAN;
		this.mouseButtons.RIGHT = three__WEBPACK_IMPORTED_MODULE_0__.MOUSE.ROTATE;

		this.touches.ONE = three__WEBPACK_IMPORTED_MODULE_0__.TOUCH.PAN;
		this.touches.TWO = three__WEBPACK_IMPORTED_MODULE_0__.TOUCH.DOLLY_ROTATE;

	}

}




/***/ }),

/***/ 903:
/*!************************************!*\
  !*** ./src/Experience/Renderer.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Renderer)
/* harmony export */ });
/* harmony import */ var _Experience__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Experience */ 387);
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ 477);
// All rights reserved by Yon
// Renderer.js 
// Manager the THEE.JS Renderer Create




class Renderer {
    constructor() {
        this.experience = new _Experience__WEBPACK_IMPORTED_MODULE_0__["default"]()
        this.sizes = this.experience.sizes
        this.scene = this.experience.scene
        this.canvas = this.experience.canvas
        this.camera = this.experience.camera

        this.setInstance()
    }

    setInstance() {
        this.instance = new three__WEBPACK_IMPORTED_MODULE_1__.WebGLRenderer({
            canvas: this.canvas,
            antialias: true,
        })
        this.instance.physicallyCorrectLights = true;
        this.instance.outputEncoding = three__WEBPACK_IMPORTED_MODULE_1__.sRGBEncoding;
        this.instance.toneMapping = three__WEBPACK_IMPORTED_MODULE_1__.ReinhardToneMapping;
        this.instance.shadowMap.enabled = true;
        this.instance.shadowMap.type = three__WEBPACK_IMPORTED_MODULE_1__.PCFSoftShadowMap;
        this.instance.setClearColor('#211d20')
        this.instance.setSize(this.sizes.width,this.sizes.height)
        this.instance.setPixelRatio(this.sizes.pixelRatio)
    }

    resize(){
        this.instance.setSize(this.sizes.width,this.sizes.height)
        this.instance.setPixelRatio(this.sizes.pixelRatio)
    }

    update(){
        this.instance.render(this.scene,this.camera.instance)
    }
}


/***/ }),

/***/ 173:
/*!***************************************!*\
  !*** ./src/Experience/Utils/Debug.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Debug)
/* harmony export */ });
/* harmony import */ var dat_gui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dat.gui */ 376);


class Debug{
    constructor(){
        this.active = window.location.hash ==='#debug'
        console.log("DebugMode:"+this.active)
        if (this.active) {
            this.ui = new dat_gui__WEBPACK_IMPORTED_MODULE_0__.GUI()
        }       
    }
}

/***/ }),

/***/ 54:
/*!**********************************************!*\
  !*** ./src/Experience/Utils/EventEmitter.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EventEmitter)
/* harmony export */ });
class EventEmitter
{
    constructor()
    {
        this.callbacks = {}
        this.callbacks.base = {}
    }

    on(_names, callback)
    {
        // Errors
        if(typeof _names === 'undefined' || _names === '')
        {
            console.warn('wrong names')
            return false
        }

        if(typeof callback === 'undefined')
        {
            console.warn('wrong callback')
            return false
        }

        // Resolve names
        const names = this.resolveNames(_names)

        // Each name
        names.forEach((_name) =>
        {
            // Resolve name
            const name = this.resolveName(_name)

            // Create namespace if not exist
            if(!(this.callbacks[ name.namespace ] instanceof Object))
                this.callbacks[ name.namespace ] = {}

            // Create callback if not exist
            if(!(this.callbacks[ name.namespace ][ name.value ] instanceof Array))
                this.callbacks[ name.namespace ][ name.value ] = []

            // Add callback
            this.callbacks[ name.namespace ][ name.value ].push(callback)
        })

        return this
    }

    off(_names)
    {
        // Errors
        if(typeof _names === 'undefined' || _names === '')
        {
            console.warn('wrong name')
            return false
        }

        // Resolve names
        const names = this.resolveNames(_names)

        // Each name
        names.forEach((_name) =>
        {
            // Resolve name
            const name = this.resolveName(_name)

            // Remove namespace
            if(name.namespace !== 'base' && name.value === '')
            {
                delete this.callbacks[ name.namespace ]
            }

            // Remove specific callback in namespace
            else
            {
                // Default
                if(name.namespace === 'base')
                {
                    // Try to remove from each namespace
                    for(const namespace in this.callbacks)
                    {
                        if(this.callbacks[ namespace ] instanceof Object && this.callbacks[ namespace ][ name.value ] instanceof Array)
                        {
                            delete this.callbacks[ namespace ][ name.value ]

                            // Remove namespace if empty
                            if(Object.keys(this.callbacks[ namespace ]).length === 0)
                                delete this.callbacks[ namespace ]
                        }
                    }
                }

                // Specified namespace
                else if(this.callbacks[ name.namespace ] instanceof Object && this.callbacks[ name.namespace ][ name.value ] instanceof Array)
                {
                    delete this.callbacks[ name.namespace ][ name.value ]

                    // Remove namespace if empty
                    if(Object.keys(this.callbacks[ name.namespace ]).length === 0)
                        delete this.callbacks[ name.namespace ]
                }
            }
        })

        return this
    }

    trigger(_name, _args)
    {
        // Errors
        if(typeof _name === 'undefined' || _name === '')
        {
            console.warn('wrong name')
            return false
        }

        let finalResult = null
        let result = null

        // Default args
        const args = !(_args instanceof Array) ? [] : _args

        // Resolve names (should on have one event)
        let name = this.resolveNames(_name)

        // Resolve name
        name = this.resolveName(name[ 0 ])

        // Default namespace
        if(name.namespace === 'base')
        {
            // Try to find callback in each namespace
            for(const namespace in this.callbacks)
            {
                if(this.callbacks[ namespace ] instanceof Object && this.callbacks[ namespace ][ name.value ] instanceof Array)
                {
                    this.callbacks[ namespace ][ name.value ].forEach(function(callback)
                    {
                        result = callback.apply(this, args)

                        if(typeof finalResult === 'undefined')
                        {
                            finalResult = result
                        }
                    })
                }
            }
        }

        // Specified namespace
        else if(this.callbacks[ name.namespace ] instanceof Object)
        {
            if(name.value === '')
            {
                console.warn('wrong name')
                return this
            }

            this.callbacks[ name.namespace ][ name.value ].forEach(function(callback)
            {
                result = callback.apply(this, args)

                if(typeof finalResult === 'undefined')
                    finalResult = result
            })
        }

        return finalResult
    }

    resolveNames(_names)
    {
        let names = _names
        names = names.replace(/[^a-zA-Z0-9 ,/.]/g, '')
        names = names.replace(/[,/]+/g, ' ')
        names = names.split(' ')

        return names
    }

    resolveName(name)
    {
        const newName = {}
        const parts = name.split('.')

        newName.original  = name
        newName.value     = parts[ 0 ]
        newName.namespace = 'base' // Base namespace

        // Specified namespace
        if(parts.length > 1 && parts[ 1 ] !== '')
        {
            newName.namespace = parts[ 1 ]
        }

        return newName
    }
}

/***/ }),

/***/ 636:
/*!****************************************!*\
  !*** ./src/Experience/Utils/Helper.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Helper)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ 477);
/* harmony import */ var _Experience__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Experience */ 387);




class Helper {
    constructor() {
        this.experience = new _Experience__WEBPACK_IMPORTED_MODULE_0__["default"]()
        this.scene = this.experience.scene
        this.resources = this.experience.resources
        this.time = this.experience.time
        this.debug = this.experience.debug
        this.camera = this.experience.camera

        if(this.debug.active){
        
            const cameraHelper = new three__WEBPACK_IMPORTED_MODULE_1__.CameraHelper( this.camera.instance );
            this.scene.add(cameraHelper)
    
            const axesHelper = new three__WEBPACK_IMPORTED_MODULE_1__.AxesHelper(10)
            this.scene.add(axesHelper)
    
            if (this.experience.world.environment) {
                this.environment = this.experience.world.environment
    
                const directionalLightHelper = new three__WEBPACK_IMPORTED_MODULE_1__.DirectionalLightHelper(
                    this.environment.sunLight,
                    0.2
                )
                const directionalLightCameraHelper = new three__WEBPACK_IMPORTED_MODULE_1__.CameraHelper(
                    this.environment.sunLight.shadow.camera
                )
                this.scene.add(directionalLightCameraHelper)
                this.scene.add(directionalLightHelper)
            }
        }

    }
}


/***/ }),

/***/ 82:
/*!*******************************************!*\
  !*** ./src/Experience/Utils/Resources.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Resources)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ 477);
/* harmony import */ var three_examples_jsm_loaders_GLTFLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader */ 217);
/* harmony import */ var three_examples_jsm_loaders_DRACOLoader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three/examples/jsm/loaders/DRACOLoader */ 854);
/* harmony import */ var _EventEmitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EventEmitter */ 54);






class Resources extends _EventEmitter__WEBPACK_IMPORTED_MODULE_2__["default"] {
    constructor(sources) {
        super()
        this.sources = sources

        this.items = {}
        this.toLoad = this.sources.length
        this.loaded = 0

        this.setLoaders()
        this.startLoading()
    }

    setLoaders() {
        this.loaders = {}
        this.loaders.gltfLoader = new three_examples_jsm_loaders_GLTFLoader__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader()
        this.loaders.textureLoader = new three__WEBPACK_IMPORTED_MODULE_3__.TextureLoader()
        this.loaders.cubeTextureLoader = new three__WEBPACK_IMPORTED_MODULE_3__.CubeTextureLoader()
    }

    startLoading() {
        for (const source of this.sources) {
            if (source.type === "gltfModel") {
                this.loaders.gltfLoader.load(source.path, (file) => {
                    this.sourceLoaded(source, file)
                })
            }
            if (source.type === "cubeTex") {
                this.loaders.cubeTextureLoader.load(source.path, (file) => {
                    this.sourceLoaded(source, file)
                })
            }
            if (source.type === "tex") {
                this.loaders.textureLoader.load(source.path, (file) => {
                    this.sourceLoaded(source, file)
                })
            }
        }
    }

    sourceLoaded(source, file) {
        this.items[source.name] = file
        console.log(source, file)
        this.loaded++
        if (this.loaded === this.toLoad) {
            this.trigger("ready")
        }
    }
}


/***/ }),

/***/ 803:
/*!***************************************!*\
  !*** ./src/Experience/Utils/Sizes.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Sizes)
/* harmony export */ });
/* harmony import */ var _EventEmitter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventEmitter.js */ 54);


class Sizes extends _EventEmitter_js__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super()
        this.width = window.innerWidth
        this.height = window.innerHeight
        this.pixelRatio = Math.min(window.devicePixelRatio, 2)

        window.addEventListener("resize", () => {
            this.width = window.innerWidth
            this.height = window.innerHeight
            this.pixelRatio = Math.min(window.devicePixelRatio, 2)

            this.trigger("resize")
        })
    }
}


/***/ }),

/***/ 619:
/*!**************************************!*\
  !*** ./src/Experience/Utils/Time.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Time)
/* harmony export */ });
/* harmony import */ var _EventEmitter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventEmitter.js */ 54);


class Time extends _EventEmitter_js__WEBPACK_IMPORTED_MODULE_0__["default"]
{
    constructor()
    {
        super()

        // Setup
        this.start = Date.now()
        this.current = this.start
        this.elapsed = 0
        this.delta = 16

        window.requestAnimationFrame(() =>
        {
            this.tick()
        })
    }

    tick()
    {
        const currentTime = Date.now()
        this.delta = currentTime - this.current
        this.current = currentTime
        this.elapsed = this.current - this.start

        this.trigger('tick')

        window.requestAnimationFrame(() =>
        {
            this.tick()
        })
    }
}

/***/ }),

/***/ 739:
/*!*********************************************!*\
  !*** ./src/Experience/World/Atlas/Atlas.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Atlas)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ 477);
/* harmony import */ var _Experience__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Experience */ 387);
// All rights reserved by Yon
// Atlas.js
// Manager the basic atlas renderer






class Atlas {
    constructor() {
        this.experience = new _Experience__WEBPACK_IMPORTED_MODULE_0__["default"]()
        this.scene = this.experience.scene
        this.resources = this.experience.resources
        this.time = this.experience.time
        this.debug = this.experience.debug

        if (this.debug.active) {
            this.debugFolder = this.debug.ui.addFolder("Atlas")
        }

        this.setGeometry()
        this.setTextures()
        this.setMaterial()
        this.setMesh()
    }

    setGeometry() {
        this.geometry = new three__WEBPACK_IMPORTED_MODULE_1__.PlaneBufferGeometry(191.6, 132.9, 256, 128)
        this.geometry.attributes.uv2 = this.geometry.attributes.uv
    }
    setTextures() {
        this.textures = {}

        this.textures.atlas = this.resources.items.atlas
        this.textures.atlas.encoding = three__WEBPACK_IMPORTED_MODULE_1__.sRGBEncoding
        this.textures.atlas.repeat.set(1, 1)
        this.textures.atlas.wrapS = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping
        this.textures.atlas.wrapT = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping

        this.textures.normal = this.resources.items.atlasNormal
        this.textures.normal.encoding = three__WEBPACK_IMPORTED_MODULE_1__.LinearEncoding
        this.textures.normal.wrapS = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping
        this.textures.normal.wrapT = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping

        this.textures.displacement = this.resources.items.atlasDisplacement
        this.textures.normal.wrapS = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping
        this.textures.normal.wrapT = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping

        this.textures.occlusion = this.resources.items.atlasOcclusion
        this.textures.normal.wrapS = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping
        this.textures.normal.wrapT = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping

        this.textures.roughness = this.resources.items.atlasRoughness
        this.textures.normal.wrapS = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping
        this.textures.normal.wrapT = three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping
    }
    setMaterial() {
        this.material = new three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial({
            map: this.textures.atlas,
            normalMap: this.textures.normal,
            aoMap: this.textures.occlusion,
            displacementMap: this.textures.displacement,
        })
        this.material.aoMapIntensity = 35
        this.material.displacementScale = 1.5
        this.material.normalScale = new three__WEBPACK_IMPORTED_MODULE_1__.Vector2(0.3, 0.3)
    }
    setMesh() {
        this.mesh = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(this.geometry, this.material)
        this.mesh.rotation.x = -Math.PI * 0.5
        this.mesh.receiveShadow = true
        this.scene.add(this.mesh)
    }

    update() {}
}


/***/ }),

/***/ 60:
/*!*******************************************!*\
  !*** ./src/Experience/World/Atlas/Fox.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Fox)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ 477);
/* harmony import */ var _Experience__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Experience */ 387);
// All rights reserved by Yon
// Fox.js 
// Manager the Fox Resources





class Fox {
    constructor() {
        this.experience = new _Experience__WEBPACK_IMPORTED_MODULE_0__["default"]()
        this.scene = this.experience.scene
        this.resources = this.experience.resources
        this.time = this.experience.time
        this.debug = this.experience.debug

        if (this.debug.active) {
            this.debugFolder = this.debug.ui.addFolder("fox")
        }

        this.resource = this.resources.items.foxModel

        this.setModel()
        this.setAnimation()
    }

    setModel() {
        this.model = this.resource.scene
        this.model.scale.set(0.02, 0.02, 0.02)
        this.scene.add(this.model)

        this.model.traverse((child) => {
            if (child instanceof three__WEBPACK_IMPORTED_MODULE_1__.Mesh) {

                child.castShadow = true
            }
        })
    }

    setAnimation() {
        this.animation = {}

        // Mixer
        this.animation.mixer = new three__WEBPACK_IMPORTED_MODULE_1__.AnimationMixer(this.model)

        // Actions
        this.animation.actions = {}

        this.animation.actions.idle = this.animation.mixer.clipAction(
            this.resource.animations[0]
        )
        this.animation.actions.walking = this.animation.mixer.clipAction(
            this.resource.animations[1]
        )
        this.animation.actions.running = this.animation.mixer.clipAction(
            this.resource.animations[2]
        )

        this.animation.actions.current = this.animation.actions.walking

        // this.animation.actions.current.play()

        this.animation.play = (name) => {
            const newAction = this.animation.actions[name]
            const oldAction = this.animation.actions.current
            newAction.reset()
            newAction.play()
            newAction.crossFadeFrom(oldAction, 1)

            this.animation.actions.current = newAction
        }

        if (this.debug.active) {
            const debugObject = {
                playIdle: () => {
                    this.animation.play("idle")
                },
                playWalking: () => {
                    this.animation.play("walking")
                },
                playRunning: () => {
                    this.animation.play("running")
                },
            }
            this.debugFolder.add(debugObject, "playIdle")
            this.debugFolder.add(debugObject, "playWalking")
            this.debugFolder.add(debugObject,'playRunning')
        }
    }

    update() {
        this.animation.mixer.update(this.time.delta * 0.001)
    }
}


/***/ }),

/***/ 121:
/*!*********************************************!*\
  !*** ./src/Experience/World/Environment.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Environment)
/* harmony export */ });
/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ 477);
/* harmony import */ var _Experience__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Experience */ 387);
// All rights reserved by Yon
// Environment.js 
// Manager the Environment
// Include light, envirMap
// Include how envirMap effect the material, it has a loop set for every object in scene





class Environment {
    constructor() {
        this.experience = new _Experience__WEBPACK_IMPORTED_MODULE_0__["default"]()
        this.scene = this.experience.scene
        this.resources = this.experience.resources
        this.debug = this.experience.debug

        if(this.debug.active){
            this.debugFolder = this.debug.ui.addFolder("environment")
        }

        this.setSunLight()
        this.setEnvironmentMap()
    }

    setSunLight() {
        const directionalLightIntensity = 10
        this.sunLight = new three__WEBPACK_IMPORTED_MODULE_1__.DirectionalLight(
            0xffffff,
            directionalLightIntensity
        )
        this.sunLight.position.set(-4, 4, 4)
        this.sunLight.castShadow = true
        this.sunLight.shadow.camera.far = 15
        this.sunLight.shadow.mapSize.width = 512
        this.sunLight.shadow.mapSize.height = 512

        this.scene.add(this.sunLight)

        if(this.debug.active){
            this.debugFolder.add(this.sunLight,"intensity").name('sunLightIntensity').min(0).max(10).step(0.001)
            this.debugFolder.add(this.sunLight.position,"x").name('sunLightIntensity').min(-5).max(5).step(0.001)
            this.debugFolder.add(this.sunLight.position,"y").name('sunLightIntensity').min(-5).max(5).step(0.001)
            this.debugFolder.add(this.sunLight.position,"z").name('sunLightIntensity').min(-5).max(5).step(0.001)
        }

    }

    setEnvironmentMap() {
        this.environmentMap = {}
        this.environmentMap.intensity = 0.3
        this.environmentMap.texture = this.resources.items.environmentMapTexture
        this.environmentMap.texture.encoding = three__WEBPACK_IMPORTED_MODULE_1__.sRGBEncoding

        this.scene.environment = this.environmentMap.texture

        this.environmentMap.updateMaterial = () => {
            this.scene.traverse((child) => {
                if (
                    child instanceof three__WEBPACK_IMPORTED_MODULE_1__.Mesh &&
                    child.material instanceof three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial
                ) {
                    child.material.envMap = this.environmentMap.texture
                    child.material.envMapIntensity =
                        this.environmentMap.intensity
                    child.material.needsUpdate = true
                }
            })
        }
        this.environmentMap.updateMaterial()

        if(this.debug.active){
            this.debugFolder.add(this.environmentMap,"intensity").name('envMapIntensity').min(0).max(4).step(0.001).onChange(this.environmentMap.updateMaterial)
        }
    }
}


/***/ }),

/***/ 336:
/*!***************************************!*\
  !*** ./src/Experience/World/World.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ World)
/* harmony export */ });
/* harmony import */ var _Experience__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Experience */ 387);
/* harmony import */ var _Environment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Environment */ 121);
/* harmony import */ var _Utils_Helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Utils/Helper */ 636);
/* harmony import */ var _Atlas_Fox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Atlas/Fox */ 60);
/* harmony import */ var _Atlas_Atlas__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Atlas/Atlas */ 739);
// All rights reserved by Yon
// word.js 
// Manager the render world outline








class World {
    constructor() {
        this.experience = new _Experience__WEBPACK_IMPORTED_MODULE_0__["default"]()
        this.scene = this.experience.scene
        this.resources = this.experience.resources


        this.resources.on('ready',()=>{
            console.log("resources are ready")

            this.fox = new _Atlas_Fox__WEBPACK_IMPORTED_MODULE_3__["default"]()
            this.atlas = new _Atlas_Atlas__WEBPACK_IMPORTED_MODULE_4__["default"]()
            this.environment = new _Environment__WEBPACK_IMPORTED_MODULE_1__["default"]()

            this.helper = new _Utils_Helper__WEBPACK_IMPORTED_MODULE_2__["default"]()
        })

    }

    update() {
        if (this.fox) {
            this.fox.update()
        }

    }
}


/***/ }),

/***/ 780:
/*!***********************************!*\
  !*** ./src/Experience/sources.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// All rights reserved by Yon
// sources.js 
// Manager the art resources load path and type information
// support *tex *gltfModel *cubeTex
// Manager By Resources.js

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([
    {
        name: "environmentMapTexture",
        type: "cubeTex",
        path: [
            "textures/environmentMaps/0/px.jpg",
            "textures/environmentMaps/0/nx.jpg",
            "textures/environmentMaps/0/py.jpg",
            "textures/environmentMaps/0/ny.jpg",
            "textures/environmentMaps/0/pz.jpg",
            "textures/environmentMaps/0/nz.jpg",
        ],
    },


    {
        name: "foxModel",
        type: "gltfModel",
        path: "models/Fox/glTF/Fox.gltf",
    },

    {
        name: "atlas",
        type:"tex",
        path: "textures/atlas/atlasMeta.png"
    },
    {
        name: "atlasNormal",
        type: "tex",
        path: "textures/atlas/normal.png",
    },
    {
        name: "atlasDisplacement",
        type: "tex",
        path: "textures/atlas/displacement.png",
    },
    {
        name: "atlasOcclusion",
        type: "tex",
        path: "textures/atlas/occlusion.png",
    },
    {
        name: "atlasRoughness",
        type: "tex",
        path: "textures/atlas/roughness.png",
    }
]);


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__(438)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsMENBQU87QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywwQ0FBTztBQUM3QztBQUNBLHNDQUFzQywwQ0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQixHQUFHO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRDQUFTO0FBQ2pDLDZCQUE2Qiw0Q0FBUztBQUN0QztBQUNBO0FBQ0Esd0JBQXdCLDBDQUFPO0FBQy9CO0FBQ0E7QUFDQSwwQkFBMEIsMENBQU87QUFDakMsd0JBQXdCLDBDQUFPO0FBQy9CLDBCQUEwQiwwQ0FBTztBQUNqQztBQUNBLHVCQUF1QiwwQ0FBTztBQUM5QixxQkFBcUIsMENBQU87QUFDNUIsdUJBQXVCLDBDQUFPO0FBQzlCO0FBQ0EseUJBQXlCLDBDQUFPO0FBQ2hDLHVCQUF1QiwwQ0FBTztBQUM5Qix5QkFBeUIsMENBQU87QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwQ0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwQ0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQSxzQkFBc0IsMENBQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhDQUFXO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0NBQVk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDRDQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0NBQVk7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw0Q0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtEQUFlO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQWtCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMENBQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsaUJBQWlCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBLDJCQUEyQiw0Q0FBUztBQUNwQyw0QkFBNEIsK0NBQVk7QUFDeEM7QUFDQSxxQkFBcUIsNENBQVM7QUFDOUIscUJBQXFCLHFEQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NDOzs7Ozs7Ozs7Ozs7Ozs7OztBQzd3Q3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ3FDO0FBQ1A7QUFDOUI7QUFDZTtBQUNmO0FBQ0EsOEJBQThCLG1EQUFVO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnREFBbUI7QUFDL0M7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHVDQUF1QywrQ0FBa0I7QUFDekQsb0NBQW9DLHNEQUF5QjtBQUM3RDtBQUNBLHVDQUF1QyxtREFBc0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQ3pDOEI7QUFDOUI7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdDQUFPO0FBQ2pDO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNWZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsK0NBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx1Q0FBVTtBQUMvQyw4Q0FBOEMsdURBQTBCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNzQztBQUNDO0FBQ0g7QUFDcEM7QUFDNkI7QUFDSTtBQUNqQztBQUNlO0FBQ2Y7QUFDQSw4QkFBOEIsbURBQVU7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0RBQUc7QUFDOUIsNkJBQTZCLG9EQUFLO0FBQ2xDLG1DQUFtQyxvREFBVztBQUM5QztBQUNBLDhCQUE4QixxREFBTTtBQUNwQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9zdHlsZS5jc3M/NzE2MyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvQ2FudmFzLmpzIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9FeHBlcmllbmNlL0NhbWVyYS5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvRXhwZXJpZW5jZS9FeHBlcmllbmNlLmpzIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9FeHBlcmllbmNlL092ZXJyaWRlL09yYml0Q29udHJvbHMuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0V4cGVyaWVuY2UvUmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0V4cGVyaWVuY2UvVXRpbHMvRGVidWcuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0V4cGVyaWVuY2UvVXRpbHMvRXZlbnRFbWl0dGVyLmpzIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9FeHBlcmllbmNlL1V0aWxzL0hlbHBlci5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvRXhwZXJpZW5jZS9VdGlscy9SZXNvdXJjZXMuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0V4cGVyaWVuY2UvVXRpbHMvU2l6ZXMuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0V4cGVyaWVuY2UvVXRpbHMvVGltZS5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvRXhwZXJpZW5jZS9Xb3JsZC9BdGxhcy9BdGxhcy5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvRXhwZXJpZW5jZS9Xb3JsZC9BdGxhcy9Gb3guanMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0V4cGVyaWVuY2UvV29ybGQvRW52aXJvbm1lbnQuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0V4cGVyaWVuY2UvV29ybGQvV29ybGQuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0V4cGVyaWVuY2Uvc291cmNlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIioge1xcclxcbiAgICBtYXJnaW46IDA7XFxyXFxuICAgIHBhZGRpbmc6IDA7XFxyXFxufVxcclxcblxcclxcblxcclxcbi8qIGh0bWwsXFxyXFxuYm9keSB7XFxyXFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxyXFxufSAqL1xcclxcblxcclxcbi53ZWJnbCB7XFxyXFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcXHJcXG4gICAgdG9wOiAwO1xcclxcbiAgICBsZWZ0OiAwO1xcclxcbiAgICBvdXRsaW5lOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4ud29yZCB7XFxyXFxuICAgIGRpc3BsYXk6IGZpeGVkO1xcclxcbiAgICB0b3A6IDA7XFxyXFxuICAgIGxlZnQ6IDA7XFxyXFxuICAgIGNvbG9yOiAjZmZlZGVkO1xcclxcblxcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuXFxyXFxufVxcclxcblxcclxcbmJvZHkge1xcclxcbiAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xcclxcbiAgICAvKueBq+eLkCovXFxyXFxuICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICAgIC8qd2Via2l05rWP6KeI5ZmoKi9cXHJcXG4gICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xcclxcbiAgICAvKklFMTAqL1xcclxcbiAgICAta2h0bWwtdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICAgIC8q5pep5pyf5rWP6KeI5ZmoKi9cXHJcXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9zdHlsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7SUFDSSxTQUFTO0lBQ1QsVUFBVTtBQUNkOzs7QUFHQTs7O0dBR0c7O0FBRUg7SUFDSSxlQUFlO0lBQ2YsTUFBTTtJQUNOLE9BQU87SUFDUCxhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksY0FBYztJQUNkLE1BQU07SUFDTixPQUFPO0lBQ1AsY0FBYzs7SUFFZCxrQkFBa0I7O0FBRXRCOztBQUVBO0lBQ0ksc0JBQXNCO0lBQ3RCLEtBQUs7SUFDTCx5QkFBeUI7SUFDekIsWUFBWTtJQUNaLHFCQUFxQjtJQUNyQixPQUFPO0lBQ1Asd0JBQXdCO0lBQ3hCLFFBQVE7SUFDUixpQkFBaUI7QUFDckJcIixcInNvdXJjZXNDb250ZW50XCI6W1wiKiB7XFxyXFxuICAgIG1hcmdpbjogMDtcXHJcXG4gICAgcGFkZGluZzogMDtcXHJcXG59XFxyXFxuXFxyXFxuXFxyXFxuLyogaHRtbCxcXHJcXG5ib2R5IHtcXHJcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXHJcXG59ICovXFxyXFxuXFxyXFxuLndlYmdsIHtcXHJcXG4gICAgcG9zaXRpb246IGZpeGVkO1xcclxcbiAgICB0b3A6IDA7XFxyXFxuICAgIGxlZnQ6IDA7XFxyXFxuICAgIG91dGxpbmU6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi53b3JkIHtcXHJcXG4gICAgZGlzcGxheTogZml4ZWQ7XFxyXFxuICAgIHRvcDogMDtcXHJcXG4gICAgbGVmdDogMDtcXHJcXG4gICAgY29sb3I6ICNmZmVkZWQ7XFxyXFxuXFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG5cXHJcXG59XFxyXFxuXFxyXFxuYm9keSB7XFxyXFxuICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICAgIC8q54Gr54uQKi9cXHJcXG4gICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gICAgLyp3ZWJraXTmtY/op4jlmagqL1xcclxcbiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICAgIC8qSUUxMCovXFxyXFxuICAgIC1raHRtbC11c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gICAgLyrml6nmnJ/mtY/op4jlmagqL1xcclxcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcXHJcXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIi8vIEFsbCByaWdodHMgcmVzZXJ2ZWQgYnkgWW9uXHJcbi8vIENhbnZhcy5qcyBcclxuLy8gTWFuYWdlciB0aGUgVEhSRUUuanMgUmVuZGVyZXJcclxuXHJcbmltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XHJcblxyXG5pbXBvcnQgRXhwZXJpZW5jZSBmcm9tIFwiLi9FeHBlcmllbmNlL0V4cGVyaWVuY2VcIjtcclxuXHJcbmNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5jb25zdCBlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuZUNhbnZhcy5jbGFzc05hbWUgPSBcIndlYmdsXCI7XHJcbmVsZW1lbnQuYXBwZW5kQ2hpbGQoZUNhbnZhcyk7XHJcblxyXG5jb25zdCBleHBlcmllbmNlID0gbmV3IEV4cGVyaWVuY2UoZUNhbnZhcyk7XHJcbiAgXHJcbmRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIGRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF0pO1xyXG4iLCIvLyBBbGwgcmlnaHRzIHJlc2VydmVkIGJ5IFlvblxyXG4vLyBDYW1lcmEuanMgXHJcbi8vIE1hbmFnZXIgdGhlIGNhbWVyYSBjb250cm9sXHJcbi8vIGhlcmUgdXNlIHRoZSBPcmJpdENvbnRyb2xzIGZvcm0gVEhSRUUuanMgYW5kIG92ZXJyaWRlIGl0IHdpdGggem9vbiBzY2FsZSBjdXN0b21pemF0aW9uXHJcblxyXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIlxyXG5cclxuaW1wb3J0IHsgT3JiaXRDb250cm9scyB9IGZyb20gXCIuL092ZXJyaWRlL09yYml0Q29udHJvbHNcIlxyXG5cclxuaW1wb3J0IEV4cGVyaWVuY2UgZnJvbSBcIi4vRXhwZXJpZW5jZVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5leHBlcmllbmNlID0gbmV3IEV4cGVyaWVuY2UoKVxyXG4gICAgICAgIHRoaXMuc2l6ZXMgPSB0aGlzLmV4cGVyaWVuY2Uuc2l6ZXNcclxuICAgICAgICB0aGlzLnNjZW5lID0gdGhpcy5leHBlcmllbmNlLnNjZW5lXHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSB0aGlzLmV4cGVyaWVuY2UuY2FudmFzXHJcblxyXG4gICAgICAgIHRoaXMuc2V0SW5zdGFuY2UoKVxyXG4gICAgICAgIHRoaXMuc2V0T3JiaXRDb250cm9sKClcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnN0YW5jZSgpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKFxyXG4gICAgICAgICAgICA2MCxcclxuICAgICAgICAgICAgdGhpcy5zaXplcy53aWR0aCAvIHRoaXMuc2l6ZXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICAwLjEsXHJcbiAgICAgICAgICAgIDEwMDBcclxuICAgICAgICApXHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5wb3NpdGlvbi5zZXQoMCwgNTEuOTYxNSwgMzApXHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5pbnN0YW5jZSlcclxuICAgIH1cclxuXHJcbiAgICBzZXRPcmJpdENvbnRyb2woKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKHRoaXMuaW5zdGFuY2UsIHRoaXMuY2FudmFzKVxyXG4gICAgICAgIHRoaXMuY29udHJvbHMuZW5hYmxlRGFtcGluZyA9IHRydWVcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmRhbXBpbmdGYWN0b3IgPSAwLjJcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLnNjcmVlblNwYWNlUGFubmluZyA9IGZhbHNlXHJcblxyXG4gICAgICAgIHRoaXMuY29udHJvbHMubW91c2VCdXR0b25zID0ge1xyXG4gICAgICAgICAgICBSSUdIVDogVEhSRUUuTU9VU0UuUk9UQVRFLFxyXG4gICAgICAgICAgICBNSURETEU6IFRIUkVFLk1PVVNFLkRPTExZLFxyXG4gICAgICAgICAgICBMRUZUOiBUSFJFRS5NT1VTRS5QQU4sXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5tYXhEaXN0YW5jZSA9IDEyMFxyXG4gICAgICAgIHRoaXMuY29udHJvbHMubWluRGlzdGFuY2UgPSAzMFxyXG5cclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmVuYWJsZVJvdGF0ZSA9IHRydWVcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLm1pbkF6aW11dGhBbmdsZSA9IC1NYXRoLlBJIC8gM1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMubWF4QXppbXV0aEFuZ2xlID0gTWF0aC5QSSAvIDNcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLm1pblBvbGFyQW5nbGUgPSBNYXRoLlBJLzEyXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5tYXhQb2xhckFuZ2xlID0gTWF0aC5QSS80XHJcblxyXG4gICAgICAgIHRoaXMuY29udHJvbHMuem9vbVNwZWVkID0gMC41XHJcblxyXG4gICAgICAgIHRoaXMuY29udHJvbHMubWluUGFuQm94ID0gbmV3IFRIUkVFLlZlY3RvcjMoLTk1LDAsLTY2KVxyXG4gICAgICAgIHRoaXMuY29udHJvbHMubWF4UGFuQm94ID0gbmV3IFRIUkVFLlZlY3RvcjMoOTUsMCw2NilcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmxpbWl0UGFuID0gdHJ1ZVxyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXNpemUoKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5hc3BlY3QgPSB0aGlzLnNpemVzLndpZHRoIC8gdGhpcy5zaXplcy5oZWlnaHRcclxuICAgICAgICB0aGlzLmluc3RhbmNlLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZSgpXHJcblxyXG4gICAgfVxyXG59XHJcbiIsIi8vIEFsbCByaWdodHMgcmVzZXJ2ZWQgYnkgWW9uXHJcbi8vIEV4cGVyaWVuY2UuanMgXHJcbi8vIE1hbmFnZXIgYWxsIGNsYXNzZXMgbG9hZCBhbmQgZGlzcG9zZVxyXG4vLyBNYW5hZ2VyIHRpY2sgcmVzaXplIGV2ZW50XHJcblxyXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIlxyXG5cclxuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi9DYW1lcmFcIlxyXG5pbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vUmVuZGVyZXJcIlxyXG5pbXBvcnQgU2l6ZXMgZnJvbSBcIi4vVXRpbHMvU2l6ZXNcIlxyXG5pbXBvcnQgVGltZSBmcm9tIFwiLi9VdGlscy9UaW1lXCJcclxuaW1wb3J0IFdvcmxkIGZyb20gXCIuL1dvcmxkL1dvcmxkXCJcclxuaW1wb3J0IERlYnVnIGZyb20gXCIuL1V0aWxzL0RlYnVnXCJcclxuaW1wb3J0IFJlc291cmNlcyBmcm9tIFwiLi9VdGlscy9SZXNvdXJjZXNcIlxyXG5pbXBvcnQgc291cmNlcyBmcm9tICcuL3NvdXJjZXMnXHJcblxyXG5sZXQgaW5zdGFuY2UgPSBudWxsXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeHBlcmllbmNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbnZhcykge1xyXG4gICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluc3RhbmNlID0gdGhpc1xyXG5cclxuICAgICAgICB3aW5kb3cuZXhwZXJpZW5jZSA9IHRoaXNcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXNcclxuXHJcbiAgICAgICAgdGhpcy5kZWJ1ZyA9IG5ldyBEZWJ1ZygpXHJcbiAgICAgICAgdGhpcy5zaXplcyA9IG5ldyBTaXplcygpXHJcbiAgICAgICAgdGhpcy50aW1lID0gbmV3IFRpbWUoKVxyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKVxyXG4gICAgICAgIHRoaXMucmVzb3VyY2VzID0gbmV3IFJlc291cmNlcyhzb3VyY2VzKVxyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYSgpXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcigpXHJcbiAgICAgICAgdGhpcy53b3JsZCA9IG5ldyBXb3JsZCgpXHJcblxyXG4gICAgICAgIHRoaXMuc2l6ZXMub24oXCJyZXNpemVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZSgpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy50aW1lLm9uKFwidGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2l6ZSgpIHtcclxuICAgICAgICB0aGlzLmNhbWVyYS5yZXNpemUoKVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVzaXplKClcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlKClcclxuICAgICAgICB0aGlzLndvcmxkLnVwZGF0ZSgpXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoKVxyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5zaXplcy5vZmYoJ3Jlc2l6ZScpXHJcbiAgICAgICAgdGhpcy50aW1lLm9mZigndGljaycpXHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUudHJhdmVyc2UoKGNoaWxkKT0+e1xyXG4gICAgICAgICAgICBpZihjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpe1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuZ2VvbWV0cnkuZGlzcG9zZSgpXHJcbiAgICAgICAgICAgICAgICBmb3IoY29uc3Qga2V5IGluIGNoaWxkLm1hdGVyaWFsKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNoaWxkLm1hdGVyaWFsW2tleV1cclxuICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuZGlzcG9zZSA9PT0gJ2Z1bmN0aW9uJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmRpc3Bvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMuY2FtZXJhLmNvbnRyb2xzLmRpc3Bvc2UoKVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuaW5zdGFuY2UuZGlzcG9zZSgpXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuXHRFdmVudERpc3BhdGNoZXIsXHJcblx0TU9VU0UsXHJcblx0UXVhdGVybmlvbixcclxuXHRTcGhlcmljYWwsXHJcblx0VE9VQ0gsXHJcblx0VmVjdG9yMixcclxuXHRWZWN0b3IzXHJcbn0gZnJvbSAndGhyZWUnO1xyXG5cclxuLy8gVGhpcyBzZXQgb2YgY29udHJvbHMgcGVyZm9ybXMgb3JiaXRpbmcsIGRvbGx5aW5nICh6b29taW5nKSwgYW5kIHBhbm5pbmcuXHJcbi8vIFVubGlrZSBUcmFja2JhbGxDb250cm9scywgaXQgbWFpbnRhaW5zIHRoZSBcInVwXCIgZGlyZWN0aW9uIG9iamVjdC51cCAoK1kgYnkgZGVmYXVsdCkuXHJcbi8vXHJcbi8vICAgIE9yYml0IC0gbGVmdCBtb3VzZSAvIHRvdWNoOiBvbmUtZmluZ2VyIG1vdmVcclxuLy8gICAgWm9vbSAtIG1pZGRsZSBtb3VzZSwgb3IgbW91c2V3aGVlbCAvIHRvdWNoOiB0d28tZmluZ2VyIHNwcmVhZCBvciBzcXVpc2hcclxuLy8gICAgUGFuIC0gcmlnaHQgbW91c2UsIG9yIGxlZnQgbW91c2UgKyBjdHJsL21ldGEvc2hpZnRLZXksIG9yIGFycm93IGtleXMgLyB0b3VjaDogdHdvLWZpbmdlciBtb3ZlXHJcblxyXG5jb25zdCBfY2hhbmdlRXZlbnQgPSB7IHR5cGU6ICdjaGFuZ2UnIH07XHJcbmNvbnN0IF9zdGFydEV2ZW50ID0geyB0eXBlOiAnc3RhcnQnIH07XHJcbmNvbnN0IF9lbmRFdmVudCA9IHsgdHlwZTogJ2VuZCcgfTtcclxuXHJcbmNsYXNzIE9yYml0Q29udHJvbHMgZXh0ZW5kcyBFdmVudERpc3BhdGNoZXIge1xyXG5cclxuXHRjb25zdHJ1Y3Rvciggb2JqZWN0LCBkb21FbGVtZW50ICkge1xyXG5cclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCBkb21FbGVtZW50ID09PSB1bmRlZmluZWQgKSBjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiBUaGUgc2Vjb25kIHBhcmFtZXRlciBcImRvbUVsZW1lbnRcIiBpcyBub3cgbWFuZGF0b3J5LicgKTtcclxuXHRcdGlmICggZG9tRWxlbWVudCA9PT0gZG9jdW1lbnQgKSBjb25zb2xlLmVycm9yKCAnVEhSRUUuT3JiaXRDb250cm9sczogXCJkb2N1bWVudFwiIHNob3VsZCBub3QgYmUgdXNlZCBhcyB0aGUgdGFyZ2V0IFwiZG9tRWxlbWVudFwiLiBQbGVhc2UgdXNlIFwicmVuZGVyZXIuZG9tRWxlbWVudFwiIGluc3RlYWQuJyApO1xyXG5cclxuXHRcdHRoaXMub2JqZWN0ID0gb2JqZWN0O1xyXG5cdFx0dGhpcy5kb21FbGVtZW50ID0gZG9tRWxlbWVudDtcclxuXHRcdHRoaXMuZG9tRWxlbWVudC5zdHlsZS50b3VjaEFjdGlvbiA9ICdub25lJzsgLy8gZGlzYWJsZSB0b3VjaCBzY3JvbGxcclxuXHJcblx0XHQvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGlzIGNvbnRyb2xcclxuXHRcdHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdFx0Ly8gXCJ0YXJnZXRcIiBzZXRzIHRoZSBsb2NhdGlvbiBvZiBmb2N1cywgd2hlcmUgdGhlIG9iamVjdCBvcmJpdHMgYXJvdW5kXHJcblx0XHR0aGlzLnRhcmdldCA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG5cdFx0Ly8gSG93IGZhciB5b3UgY2FuIGRvbGx5IGluIGFuZCBvdXQgKCBQZXJzcGVjdGl2ZUNhbWVyYSBvbmx5IClcclxuXHRcdHRoaXMubWluRGlzdGFuY2UgPSAwO1xyXG5cdFx0dGhpcy5tYXhEaXN0YW5jZSA9IEluZmluaXR5O1xyXG5cclxuXHRcdC8vIEhvdyBmYXIgeW91IGNhbiB6b29tIGluIGFuZCBvdXQgKCBPcnRob2dyYXBoaWNDYW1lcmEgb25seSApXHJcblx0XHR0aGlzLm1pblpvb20gPSAwO1xyXG5cdFx0dGhpcy5tYXhab29tID0gSW5maW5pdHk7XHJcblxyXG5cdFx0Ly8gSG93IGZhciB5b3UgY2FuIG9yYml0IHZlcnRpY2FsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuXHJcblx0XHQvLyBSYW5nZSBpcyAwIHRvIE1hdGguUEkgcmFkaWFucy5cclxuXHRcdHRoaXMubWluUG9sYXJBbmdsZSA9IDA7IC8vIHJhZGlhbnNcclxuXHRcdHRoaXMubWF4UG9sYXJBbmdsZSA9IE1hdGguUEk7IC8vIHJhZGlhbnNcclxuXHJcblx0XHQvLyBIb3cgZmFyIHlvdSBjYW4gb3JiaXQgaG9yaXpvbnRhbGx5LCB1cHBlciBhbmQgbG93ZXIgbGltaXRzLlxyXG5cdFx0Ly8gSWYgc2V0LCB0aGUgaW50ZXJ2YWwgWyBtaW4sIG1heCBdIG11c3QgYmUgYSBzdWItaW50ZXJ2YWwgb2YgWyAtIDIgUEksIDIgUEkgXSwgd2l0aCAoIG1heCAtIG1pbiA8IDIgUEkgKVxyXG5cdFx0dGhpcy5taW5BemltdXRoQW5nbGUgPSAtIEluZmluaXR5OyAvLyByYWRpYW5zXHJcblx0XHR0aGlzLm1heEF6aW11dGhBbmdsZSA9IEluZmluaXR5OyAvLyByYWRpYW5zXHJcblxyXG5cclxuXHRcdC8vIFNldCB0byB0cnVlIHRvIGVuYWJsZSBkYW1waW5nIChpbmVydGlhKVxyXG5cdFx0Ly8gSWYgZGFtcGluZyBpcyBlbmFibGVkLCB5b3UgbXVzdCBjYWxsIGNvbnRyb2xzLnVwZGF0ZSgpIGluIHlvdXIgYW5pbWF0aW9uIGxvb3BcclxuXHRcdHRoaXMuZW5hYmxlRGFtcGluZyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5kYW1waW5nRmFjdG9yID0gMC4wNTtcclxuXHJcblx0XHQvLyBUaGlzIG9wdGlvbiBhY3R1YWxseSBlbmFibGVzIGRvbGx5aW5nIGluIGFuZCBvdXQ7IGxlZnQgYXMgXCJ6b29tXCIgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxyXG5cdFx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgem9vbWluZ1xyXG5cdFx0dGhpcy5lbmFibGVab29tID0gdHJ1ZTtcclxuXHRcdHRoaXMuem9vbVNwZWVkID0gMS4wO1xyXG5cclxuXHRcdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHJvdGF0aW5nXHJcblx0XHR0aGlzLmVuYWJsZVJvdGF0ZSA9IHRydWU7XHJcblx0XHR0aGlzLnJvdGF0ZVNwZWVkID0gMS4wO1xyXG5cclxuXHRcdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHBhbm5pbmdcclxuXHRcdHRoaXMuZW5hYmxlUGFuID0gdHJ1ZTtcclxuXHRcdHRoaXMucGFuU3BlZWQgPSAxLjA7XHJcblx0XHR0aGlzLnNjcmVlblNwYWNlUGFubmluZyA9IHRydWU7IC8vIGlmIGZhbHNlLCBwYW4gb3J0aG9nb25hbCB0byB3b3JsZC1zcGFjZSBkaXJlY3Rpb24gY2FtZXJhLnVwXHJcblx0XHR0aGlzLmtleVBhblNwZWVkID0gNy4wO1x0Ly8gcGl4ZWxzIG1vdmVkIHBlciBhcnJvdyBrZXkgcHVzaFxyXG5cclxuICAgICAgICAvL3lvbmppYW5nIGFkZCAyMDIyIDAzIDI5XHJcbiAgICAgICAgdGhpcy5saW1pdFBhbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubWluUGFuQm94ID0gbmV3IFZlY3RvcjMoIC0gMjAsIC0gMjAsIC0gMjAgKVxyXG4gICAgICAgIHRoaXMubWF4UGFuQm94ID0gbmV3IFZlY3RvcjMoIDIwLCAyMCwgMjAgKVxyXG4gICAgICAgIC8veW9uamlhbmcgZW5kIDIwMjIgMDMgMjlcclxuXHJcblx0XHQvLyBTZXQgdG8gdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IHJvdGF0ZSBhcm91bmQgdGhlIHRhcmdldFxyXG5cdFx0Ly8gSWYgYXV0by1yb3RhdGUgaXMgZW5hYmxlZCwgeW91IG11c3QgY2FsbCBjb250cm9scy51cGRhdGUoKSBpbiB5b3VyIGFuaW1hdGlvbiBsb29wXHJcblx0XHR0aGlzLmF1dG9Sb3RhdGUgPSBmYWxzZTtcclxuXHRcdHRoaXMuYXV0b1JvdGF0ZVNwZWVkID0gMi4wOyAvLyAzMCBzZWNvbmRzIHBlciBvcmJpdCB3aGVuIGZwcyBpcyA2MFxyXG5cclxuXHRcdC8vIFRoZSBmb3VyIGFycm93IGtleXNcclxuXHRcdHRoaXMua2V5cyA9IHsgTEVGVDogJ0Fycm93TGVmdCcsIFVQOiAnQXJyb3dVcCcsIFJJR0hUOiAnQXJyb3dSaWdodCcsIEJPVFRPTTogJ0Fycm93RG93bicgfTtcclxuXHJcblx0XHQvLyBNb3VzZSBidXR0b25zXHJcblx0XHR0aGlzLm1vdXNlQnV0dG9ucyA9IHsgTEVGVDogTU9VU0UuUk9UQVRFLCBNSURETEU6IE1PVVNFLkRPTExZLCBSSUdIVDogTU9VU0UuUEFOIH07XHJcblxyXG5cdFx0Ly8gVG91Y2ggZmluZ2Vyc1xyXG5cdFx0dGhpcy50b3VjaGVzID0geyBPTkU6IFRPVUNILlJPVEFURSwgVFdPOiBUT1VDSC5ET0xMWV9QQU4gfTtcclxuXHJcblx0XHQvLyBmb3IgcmVzZXRcclxuXHRcdHRoaXMudGFyZ2V0MCA9IHRoaXMudGFyZ2V0LmNsb25lKCk7XHJcblx0XHR0aGlzLnBvc2l0aW9uMCA9IHRoaXMub2JqZWN0LnBvc2l0aW9uLmNsb25lKCk7XHJcblx0XHR0aGlzLnpvb20wID0gdGhpcy5vYmplY3Quem9vbTtcclxuXHJcblx0XHQvLyB0aGUgdGFyZ2V0IERPTSBlbGVtZW50IGZvciBrZXkgZXZlbnRzXHJcblx0XHR0aGlzLl9kb21FbGVtZW50S2V5RXZlbnRzID0gbnVsbDtcclxuXHJcblx0XHQvL1xyXG5cdFx0Ly8gcHVibGljIG1ldGhvZHNcclxuXHRcdC8vXHJcblxyXG5cdFx0dGhpcy5nZXRQb2xhckFuZ2xlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0cmV0dXJuIHNwaGVyaWNhbC5waGk7XHJcblxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmdldEF6aW11dGhhbEFuZ2xlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0cmV0dXJuIHNwaGVyaWNhbC50aGV0YTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuZ2V0RGlzdGFuY2UgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5vYmplY3QucG9zaXRpb24uZGlzdGFuY2VUbyggdGhpcy50YXJnZXQgKTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMubGlzdGVuVG9LZXlFdmVudHMgPSBmdW5jdGlvbiAoIGRvbUVsZW1lbnQgKSB7XHJcblxyXG5cdFx0XHRkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgb25LZXlEb3duICk7XHJcblx0XHRcdHRoaXMuX2RvbUVsZW1lbnRLZXlFdmVudHMgPSBkb21FbGVtZW50O1xyXG5cclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5zYXZlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRzY29wZS50YXJnZXQwLmNvcHkoIHNjb3BlLnRhcmdldCApO1xyXG5cdFx0XHRzY29wZS5wb3NpdGlvbjAuY29weSggc2NvcGUub2JqZWN0LnBvc2l0aW9uICk7XHJcblx0XHRcdHNjb3BlLnpvb20wID0gc2NvcGUub2JqZWN0Lnpvb207XHJcblxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0c2NvcGUudGFyZ2V0LmNvcHkoIHNjb3BlLnRhcmdldDAgKTtcclxuXHRcdFx0c2NvcGUub2JqZWN0LnBvc2l0aW9uLmNvcHkoIHNjb3BlLnBvc2l0aW9uMCApO1xyXG5cdFx0XHRzY29wZS5vYmplY3Quem9vbSA9IHNjb3BlLnpvb20wO1xyXG5cclxuXHRcdFx0c2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuXHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggX2NoYW5nZUV2ZW50ICk7XHJcblxyXG5cdFx0XHRzY29wZS51cGRhdGUoKTtcclxuXHJcblx0XHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIHRoaXMgbWV0aG9kIGlzIGV4cG9zZWQsIGJ1dCBwZXJoYXBzIGl0IHdvdWxkIGJlIGJldHRlciBpZiB3ZSBjYW4gbWFrZSBpdCBwcml2YXRlLi4uXHJcblx0XHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdGNvbnN0IG9mZnNldCA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG5cdFx0XHQvLyBzbyBjYW1lcmEudXAgaXMgdGhlIG9yYml0IGF4aXNcclxuXHRcdFx0Y29uc3QgcXVhdCA9IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbVVuaXRWZWN0b3JzKCBvYmplY3QudXAsIG5ldyBWZWN0b3IzKCAwLCAxLCAwICkgKTtcclxuXHRcdFx0Y29uc3QgcXVhdEludmVyc2UgPSBxdWF0LmNsb25lKCkuaW52ZXJ0KCk7XHJcblxyXG5cdFx0XHRjb25zdCBsYXN0UG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xyXG5cdFx0XHRjb25zdCBsYXN0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcblxyXG5cdFx0XHRjb25zdCB0d29QSSA9IDIgKiBNYXRoLlBJO1xyXG5cclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuXHJcblx0XHRcdFx0Y29uc3QgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247XHJcblxyXG5cdFx0XHRcdG9mZnNldC5jb3B5KCBwb3NpdGlvbiApLnN1Yiggc2NvcGUudGFyZ2V0ICk7XHJcblxyXG5cdFx0XHRcdC8vIHJvdGF0ZSBvZmZzZXQgdG8gXCJ5LWF4aXMtaXMtdXBcIiBzcGFjZVxyXG5cdFx0XHRcdG9mZnNldC5hcHBseVF1YXRlcm5pb24oIHF1YXQgKTtcclxuXHJcblx0XHRcdFx0Ly8gYW5nbGUgZnJvbSB6LWF4aXMgYXJvdW5kIHktYXhpc1xyXG5cdFx0XHRcdHNwaGVyaWNhbC5zZXRGcm9tVmVjdG9yMyggb2Zmc2V0ICk7XHJcblxyXG5cdFx0XHRcdGlmICggc2NvcGUuYXV0b1JvdGF0ZSAmJiBzdGF0ZSA9PT0gU1RBVEUuTk9ORSApIHtcclxuXHJcblx0XHRcdFx0XHRyb3RhdGVMZWZ0KCBnZXRBdXRvUm90YXRpb25BbmdsZSgpICk7XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVEYW1waW5nICkge1xyXG5cclxuXHRcdFx0XHRcdHNwaGVyaWNhbC50aGV0YSArPSBzcGhlcmljYWxEZWx0YS50aGV0YSAqIHNjb3BlLmRhbXBpbmdGYWN0b3I7XHJcblx0XHRcdFx0XHRzcGhlcmljYWwucGhpICs9IHNwaGVyaWNhbERlbHRhLnBoaSAqIHNjb3BlLmRhbXBpbmdGYWN0b3I7XHJcblxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0c3BoZXJpY2FsLnRoZXRhICs9IHNwaGVyaWNhbERlbHRhLnRoZXRhO1xyXG5cdFx0XHRcdFx0c3BoZXJpY2FsLnBoaSArPSBzcGhlcmljYWxEZWx0YS5waGk7XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gcmVzdHJpY3QgdGhldGEgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0c1xyXG5cclxuXHRcdFx0XHRsZXQgbWluID0gc2NvcGUubWluQXppbXV0aEFuZ2xlO1xyXG5cdFx0XHRcdGxldCBtYXggPSBzY29wZS5tYXhBemltdXRoQW5nbGU7XHJcblxyXG5cdFx0XHRcdGlmICggaXNGaW5pdGUoIG1pbiApICYmIGlzRmluaXRlKCBtYXggKSApIHtcclxuXHJcblx0XHRcdFx0XHRpZiAoIG1pbiA8IC0gTWF0aC5QSSApIG1pbiArPSB0d29QSTsgZWxzZSBpZiAoIG1pbiA+IE1hdGguUEkgKSBtaW4gLT0gdHdvUEk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBtYXggPCAtIE1hdGguUEkgKSBtYXggKz0gdHdvUEk7IGVsc2UgaWYgKCBtYXggPiBNYXRoLlBJICkgbWF4IC09IHR3b1BJO1xyXG5cclxuXHRcdFx0XHRcdGlmICggbWluIDw9IG1heCApIHtcclxuXHJcblx0XHRcdFx0XHRcdHNwaGVyaWNhbC50aGV0YSA9IE1hdGgubWF4KCBtaW4sIE1hdGgubWluKCBtYXgsIHNwaGVyaWNhbC50aGV0YSApICk7XHJcblxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHRcdHNwaGVyaWNhbC50aGV0YSA9ICggc3BoZXJpY2FsLnRoZXRhID4gKCBtaW4gKyBtYXggKSAvIDIgKSA/XHJcblx0XHRcdFx0XHRcdFx0TWF0aC5tYXgoIG1pbiwgc3BoZXJpY2FsLnRoZXRhICkgOlxyXG5cdFx0XHRcdFx0XHRcdE1hdGgubWluKCBtYXgsIHNwaGVyaWNhbC50aGV0YSApO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyByZXN0cmljdCBwaGkgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0c1xyXG5cdFx0XHRcdHNwaGVyaWNhbC5waGkgPSBNYXRoLm1heCggc2NvcGUubWluUG9sYXJBbmdsZSwgTWF0aC5taW4oIHNjb3BlLm1heFBvbGFyQW5nbGUsIHNwaGVyaWNhbC5waGkgKSApO1xyXG5cclxuXHRcdFx0XHRzcGhlcmljYWwubWFrZVNhZmUoKTtcclxuXHJcblxyXG5cdFx0XHRcdHNwaGVyaWNhbC5yYWRpdXMgKj0gc2NhbGU7XHJcblxyXG5cdFx0XHRcdC8vIHJlc3RyaWN0IHJhZGl1cyB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzXHJcblx0XHRcdFx0c3BoZXJpY2FsLnJhZGl1cyA9IE1hdGgubWF4KCBzY29wZS5taW5EaXN0YW5jZSwgTWF0aC5taW4oIHNjb3BlLm1heERpc3RhbmNlLCBzcGhlcmljYWwucmFkaXVzICkgKTtcclxuXHJcblx0XHRcdFx0Ly8gbW92ZSB0YXJnZXQgdG8gcGFubmVkIGxvY2F0aW9uXHJcblxyXG4gICAgICAgICAgICAgICAgXHJcblxyXG5cclxuXHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZURhbXBpbmcgPT09IHRydWUgKSB7XHJcblxyXG5cdFx0XHRcdFx0c2NvcGUudGFyZ2V0LmFkZFNjYWxlZFZlY3RvciggcGFuT2Zmc2V0LCBzY29wZS5kYW1waW5nRmFjdG9yICk7XHJcblxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0c2NvcGUudGFyZ2V0LmFkZCggcGFuT2Zmc2V0ICk7XHJcblx0XHRcdFx0fVxyXG5cclxuICAgICAgICAgICAgICAgIC8veW9uamlhbmcgYWRkIDIwMjIgMDMgMjlcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMubGltaXRQYW4gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBuZXcgVmVjdG9yMygpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0LmNvcHkoIHBvc2l0aW9uICkuc3ViKCBzY29wZS50YXJnZXQgKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RGlzdGFuY2UgPSBvZmZzZXQubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGxpbWl0U2NhbGUgPSAwXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmKHRoaXMuZW5hYmxlRGFtcGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdFBhblNjYWxlID0gKHRoaXMubWF4RGlzdGFuY2UtdGFyZ2V0RGlzdGFuY2UpLyh0aGlzLm1heERpc3RhbmNlLXRoaXMubWluRGlzdGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWluID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluLmNvcHkodGhpcy5taW5QYW5Cb3gpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXggPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXguY29weSh0aGlzLm1heFBhbkJveClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnRhcmdldC5jbGFtcChtaW4ubXVsdGlwbHlTY2FsYXIobGltaXRQYW5TY2FsZSksbWF4Lm11bHRpcGx5U2NhbGFyKGxpbWl0UGFuU2NhbGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBsaW1pdFBhblNjYWxlID0gKHRoaXMubWF4RGlzdGFuY2UtdGFyZ2V0RGlzdGFuY2UpLyh0aGlzLm1heERpc3RhbmNlLXRoaXMubWluRGlzdGFuY2UpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBsZXQgbWluID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgbWluLmNvcHkodGhpcy5taW5QYW5Cb3gpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGxldCBtYXggPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBtYXguY29weSh0aGlzLm1heFBhbkJveClcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgc2NvcGUudGFyZ2V0LmNsYW1wKG1pbi5tdWx0aXBseVNjYWxhcihsaW1pdFBhblNjYWxlKSxtYXgubXVsdGlwbHlTY2FsYXIobGltaXRQYW5TY2FsZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBsaW1pdFBhblNjYWxlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL3lvbmppYW5nIGVuZCAyMDIyIDAzIDI5XHJcblxyXG5cdFx0XHRcdG9mZnNldC5zZXRGcm9tU3BoZXJpY2FsKCBzcGhlcmljYWwgKTtcclxuXHJcblx0XHRcdFx0Ly8gcm90YXRlIG9mZnNldCBiYWNrIHRvIFwiY2FtZXJhLXVwLXZlY3Rvci1pcy11cFwiIHNwYWNlXHJcblx0XHRcdFx0b2Zmc2V0LmFwcGx5UXVhdGVybmlvbiggcXVhdEludmVyc2UgKTtcclxuXHJcblx0XHRcdFx0cG9zaXRpb24uY29weSggc2NvcGUudGFyZ2V0ICkuYWRkKCBvZmZzZXQgKTtcclxuXHJcblx0XHRcdFx0c2NvcGUub2JqZWN0Lmxvb2tBdCggc2NvcGUudGFyZ2V0ICk7XHJcblxyXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlRGFtcGluZyA9PT0gdHJ1ZSApIHtcclxuXHJcblx0XHRcdFx0XHRzcGhlcmljYWxEZWx0YS50aGV0YSAqPSAoIDEgLSBzY29wZS5kYW1waW5nRmFjdG9yICk7XHJcblx0XHRcdFx0XHRzcGhlcmljYWxEZWx0YS5waGkgKj0gKCAxIC0gc2NvcGUuZGFtcGluZ0ZhY3RvciApO1xyXG5cclxuXHRcdFx0XHRcdHBhbk9mZnNldC5tdWx0aXBseVNjYWxhciggMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3IgKTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHRzcGhlcmljYWxEZWx0YS5zZXQoIDAsIDAsIDAgKTtcclxuXHJcblx0XHRcdFx0XHRwYW5PZmZzZXQuc2V0KCAwLCAwLCAwICk7XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0c2NhbGUgPSAxO1xyXG5cclxuXHRcdFx0XHQvLyB1cGRhdGUgY29uZGl0aW9uIGlzOlxyXG5cdFx0XHRcdC8vIG1pbihjYW1lcmEgZGlzcGxhY2VtZW50LCBjYW1lcmEgcm90YXRpb24gaW4gcmFkaWFucyleMiA+IEVQU1xyXG5cdFx0XHRcdC8vIHVzaW5nIHNtYWxsLWFuZ2xlIGFwcHJveGltYXRpb24gY29zKHgvMikgPSAxIC0geF4yIC8gOFxyXG5cclxuXHRcdFx0XHRpZiAoIHpvb21DaGFuZ2VkIHx8XHJcblx0XHRcdFx0XHRsYXN0UG9zaXRpb24uZGlzdGFuY2VUb1NxdWFyZWQoIHNjb3BlLm9iamVjdC5wb3NpdGlvbiApID4gRVBTIHx8XHJcblx0XHRcdFx0XHQ4ICogKCAxIC0gbGFzdFF1YXRlcm5pb24uZG90KCBzY29wZS5vYmplY3QucXVhdGVybmlvbiApICkgPiBFUFMgKSB7XHJcblxyXG5cdFx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggX2NoYW5nZUV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0bGFzdFBvc2l0aW9uLmNvcHkoIHNjb3BlLm9iamVjdC5wb3NpdGlvbiApO1xyXG5cdFx0XHRcdFx0bGFzdFF1YXRlcm5pb24uY29weSggc2NvcGUub2JqZWN0LnF1YXRlcm5pb24gKTtcclxuXHRcdFx0XHRcdHpvb21DaGFuZ2VkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0fTtcclxuXHJcblx0XHR9KCk7XHJcblxyXG5cdFx0dGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnY29udGV4dG1lbnUnLCBvbkNvbnRleHRNZW51ICk7XHJcblxyXG5cdFx0XHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24gKTtcclxuXHRcdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAncG9pbnRlcmNhbmNlbCcsIG9uUG9pbnRlckNhbmNlbCApO1xyXG5cdFx0XHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICd3aGVlbCcsIG9uTW91c2VXaGVlbCApO1xyXG5cclxuXHRcdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlICk7XHJcblx0XHRcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwICk7XHJcblxyXG5cclxuXHRcdFx0aWYgKCBzY29wZS5fZG9tRWxlbWVudEtleUV2ZW50cyAhPT0gbnVsbCApIHtcclxuXHJcblx0XHRcdFx0c2NvcGUuX2RvbUVsZW1lbnRLZXlFdmVudHMucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBvbktleURvd24gKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vc2NvcGUuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiAnZGlzcG9zZScgfSApOyAvLyBzaG91bGQgdGhpcyBiZSBhZGRlZCBoZXJlP1xyXG5cclxuXHRcdH07XHJcblxyXG5cdFx0Ly9cclxuXHRcdC8vIGludGVybmFsc1xyXG5cdFx0Ly9cclxuXHJcblx0XHRjb25zdCBzY29wZSA9IHRoaXM7XHJcblxyXG5cdFx0Y29uc3QgU1RBVEUgPSB7XHJcblx0XHRcdE5PTkU6IC0gMSxcclxuXHRcdFx0Uk9UQVRFOiAwLFxyXG5cdFx0XHRET0xMWTogMSxcclxuXHRcdFx0UEFOOiAyLFxyXG5cdFx0XHRUT1VDSF9ST1RBVEU6IDMsXHJcblx0XHRcdFRPVUNIX1BBTjogNCxcclxuXHRcdFx0VE9VQ0hfRE9MTFlfUEFOOiA1LFxyXG5cdFx0XHRUT1VDSF9ET0xMWV9ST1RBVEU6IDZcclxuXHRcdH07XHJcblxyXG5cdFx0bGV0IHN0YXRlID0gU1RBVEUuTk9ORTtcclxuXHJcblx0XHRjb25zdCBFUFMgPSAwLjAwMDAwMTtcclxuXHJcblx0XHQvLyBjdXJyZW50IHBvc2l0aW9uIGluIHNwaGVyaWNhbCBjb29yZGluYXRlc1xyXG5cdFx0Y29uc3Qgc3BoZXJpY2FsID0gbmV3IFNwaGVyaWNhbCgpO1xyXG5cdFx0Y29uc3Qgc3BoZXJpY2FsRGVsdGEgPSBuZXcgU3BoZXJpY2FsKCk7XHJcblxyXG5cdFx0bGV0IHNjYWxlID0gMTtcclxuXHRcdGNvbnN0IHBhbk9mZnNldCA9IG5ldyBWZWN0b3IzKCk7XHJcblx0XHRsZXQgem9vbUNoYW5nZWQgPSBmYWxzZTtcclxuXHJcblx0XHRjb25zdCByb3RhdGVTdGFydCA9IG5ldyBWZWN0b3IyKCk7XHJcblx0XHRjb25zdCByb3RhdGVFbmQgPSBuZXcgVmVjdG9yMigpO1xyXG5cdFx0Y29uc3Qgcm90YXRlRGVsdGEgPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuXHRcdGNvbnN0IHBhblN0YXJ0ID0gbmV3IFZlY3RvcjIoKTtcclxuXHRcdGNvbnN0IHBhbkVuZCA9IG5ldyBWZWN0b3IyKCk7XHJcblx0XHRjb25zdCBwYW5EZWx0YSA9IG5ldyBWZWN0b3IyKCk7XHJcblxyXG5cdFx0Y29uc3QgZG9sbHlTdGFydCA9IG5ldyBWZWN0b3IyKCk7XHJcblx0XHRjb25zdCBkb2xseUVuZCA9IG5ldyBWZWN0b3IyKCk7XHJcblx0XHRjb25zdCBkb2xseURlbHRhID0gbmV3IFZlY3RvcjIoKTtcclxuXHJcblx0XHRjb25zdCBwb2ludGVycyA9IFtdO1xyXG5cdFx0Y29uc3QgcG9pbnRlclBvc2l0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICBsZXQgbGltaXRQYW5TY2FsZSA9IDE7XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gMiAqIE1hdGguUEkgLyA2MCAvIDYwICogc2NvcGUuYXV0b1JvdGF0ZVNwZWVkO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRab29tU2NhbGUoKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gTWF0aC5wb3coIDAuOTUsIHNjb3BlLnpvb21TcGVlZCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiByb3RhdGVMZWZ0KCBhbmdsZSApIHtcclxuXHJcblx0XHRcdHNwaGVyaWNhbERlbHRhLnRoZXRhIC09IGFuZ2xlO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiByb3RhdGVVcCggYW5nbGUgKSB7XHJcblxyXG5cdFx0XHRzcGhlcmljYWxEZWx0YS5waGkgLT0gYW5nbGU7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHBhbkxlZnQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRjb25zdCB2ID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcblx0XHRcdHJldHVybiBmdW5jdGlvbiBwYW5MZWZ0KCBkaXN0YW5jZSwgb2JqZWN0TWF0cml4ICkge1xyXG5cclxuXHRcdFx0XHR2LnNldEZyb21NYXRyaXhDb2x1bW4oIG9iamVjdE1hdHJpeCwgMCApOyAvLyBnZXQgWCBjb2x1bW4gb2Ygb2JqZWN0TWF0cml4XHJcblx0XHRcdFx0di5tdWx0aXBseVNjYWxhciggLSBkaXN0YW5jZSApO1xyXG5cclxuXHRcdFx0XHRwYW5PZmZzZXQuYWRkKCB2ICk7XHJcblxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdH0oKTtcclxuXHJcblx0XHRjb25zdCBwYW5VcCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdGNvbnN0IHYgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIHBhblVwKCBkaXN0YW5jZSwgb2JqZWN0TWF0cml4ICkge1xyXG5cclxuXHRcdFx0XHRpZiAoIHNjb3BlLnNjcmVlblNwYWNlUGFubmluZyA9PT0gdHJ1ZSApIHtcclxuXHJcblx0XHRcdFx0XHR2LnNldEZyb21NYXRyaXhDb2x1bW4oIG9iamVjdE1hdHJpeCwgMSApO1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdHYuc2V0RnJvbU1hdHJpeENvbHVtbiggb2JqZWN0TWF0cml4LCAwICk7XHJcblx0XHRcdFx0XHR2LmNyb3NzVmVjdG9ycyggc2NvcGUub2JqZWN0LnVwLCB2ICk7XHJcblxyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdHYubXVsdGlwbHlTY2FsYXIoIGRpc3RhbmNlICk7XHJcblx0XHRcdFx0cGFuT2Zmc2V0LmFkZCggdiApO1xyXG5cclxuXHRcdFx0fTtcclxuXHJcblx0XHR9KCk7XHJcblxyXG5cdFx0Ly8gZGVsdGFYIGFuZCBkZWx0YVkgYXJlIGluIHBpeGVsczsgcmlnaHQgYW5kIGRvd24gYXJlIHBvc2l0aXZlXHJcblx0XHRjb25zdCBwYW4gPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRjb25zdCBvZmZzZXQgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIHBhbiggZGVsdGFYLCBkZWx0YVkgKSB7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50O1xyXG5cclxuXHRcdFx0XHRpZiAoIHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIHBlcnNwZWN0aXZlXHJcblx0XHRcdFx0XHRjb25zdCBwb3NpdGlvbiA9IHNjb3BlLm9iamVjdC5wb3NpdGlvbjtcclxuXHRcdFx0XHRcdG9mZnNldC5jb3B5KCBwb3NpdGlvbiApLnN1Yiggc2NvcGUudGFyZ2V0ICk7XHJcblx0XHRcdFx0XHRsZXQgdGFyZ2V0RGlzdGFuY2UgPSBvZmZzZXQubGVuZ3RoKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gaGFsZiBvZiB0aGUgZm92IGlzIGNlbnRlciB0byB0b3Agb2Ygc2NyZWVuXHJcblx0XHRcdFx0XHR0YXJnZXREaXN0YW5jZSAqPSBNYXRoLnRhbiggKCBzY29wZS5vYmplY3QuZm92IC8gMiApICogTWF0aC5QSSAvIDE4MC4wICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gd2UgdXNlIG9ubHkgY2xpZW50SGVpZ2h0IGhlcmUgc28gYXNwZWN0IHJhdGlvIGRvZXMgbm90IGRpc3RvcnQgc3BlZWRcclxuXHRcdFx0XHRcdHBhbkxlZnQoIDIgKiBkZWx0YVggKiB0YXJnZXREaXN0YW5jZSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0LCBzY29wZS5vYmplY3QubWF0cml4ICk7XHJcblx0XHRcdFx0XHRwYW5VcCggMiAqIGRlbHRhWSAqIHRhcmdldERpc3RhbmNlIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXggKTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIGlmICggc2NvcGUub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIG9ydGhvZ3JhcGhpY1xyXG5cdFx0XHRcdFx0cGFuTGVmdCggZGVsdGFYICogKCBzY29wZS5vYmplY3QucmlnaHQgLSBzY29wZS5vYmplY3QubGVmdCApIC8gc2NvcGUub2JqZWN0Lnpvb20gLyBlbGVtZW50LmNsaWVudFdpZHRoLCBzY29wZS5vYmplY3QubWF0cml4ICk7XHJcblx0XHRcdFx0XHRwYW5VcCggZGVsdGFZICogKCBzY29wZS5vYmplY3QudG9wIC0gc2NvcGUub2JqZWN0LmJvdHRvbSApIC8gc2NvcGUub2JqZWN0Lnpvb20gLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCApO1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdC8vIGNhbWVyYSBuZWl0aGVyIG9ydGhvZ3JhcGhpYyBub3IgcGVyc3BlY3RpdmVcclxuXHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIHBhbiBkaXNhYmxlZC4nICk7XHJcblx0XHRcdFx0XHRzY29wZS5lbmFibGVQYW4gPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fTtcclxuXHJcblx0XHR9KCk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gZG9sbHlPdXQoIGRvbGx5U2NhbGUgKSB7XHJcblxyXG5cdFx0XHRpZiAoIHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhICkge1xyXG5cclxuXHRcdFx0XHRzY2FsZSAvPSBkb2xseVNjYWxlO1xyXG5cclxuXHRcdFx0fSBlbHNlIGlmICggc2NvcGUub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhICkge1xyXG5cclxuXHRcdFx0XHRzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KCBzY29wZS5taW5ab29tLCBNYXRoLm1pbiggc2NvcGUubWF4Wm9vbSwgc2NvcGUub2JqZWN0Lnpvb20gKiBkb2xseVNjYWxlICkgKTtcclxuXHRcdFx0XHRzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG5cdFx0XHRcdHpvb21DaGFuZ2VkID0gdHJ1ZTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUud2FybiggJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIGRvbGx5L3pvb20gZGlzYWJsZWQuJyApO1xyXG5cdFx0XHRcdHNjb3BlLmVuYWJsZVpvb20gPSBmYWxzZTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZG9sbHlJbiggZG9sbHlTY2FsZSApIHtcclxuXHJcblx0XHRcdGlmICggc2NvcGUub2JqZWN0LmlzUGVyc3BlY3RpdmVDYW1lcmEgKSB7XHJcblxyXG5cdFx0XHRcdHNjYWxlICo9IGRvbGx5U2NhbGU7XHJcblxyXG5cdFx0XHR9IGVsc2UgaWYgKCBzY29wZS5vYmplY3QuaXNPcnRob2dyYXBoaWNDYW1lcmEgKSB7XHJcblxyXG5cdFx0XHRcdHNjb3BlLm9iamVjdC56b29tID0gTWF0aC5tYXgoIHNjb3BlLm1pblpvb20sIE1hdGgubWluKCBzY29wZS5tYXhab29tLCBzY29wZS5vYmplY3Quem9vbSAvIGRvbGx5U2NhbGUgKSApO1xyXG5cdFx0XHRcdHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcblx0XHRcdFx0em9vbUNoYW5nZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS53YXJuKCAnV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gZG9sbHkvem9vbSBkaXNhYmxlZC4nICk7XHJcblx0XHRcdFx0c2NvcGUuZW5hYmxlWm9vbSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHJcblx0XHQvL1xyXG5cdFx0Ly8gZXZlbnQgY2FsbGJhY2tzIC0gdXBkYXRlIHRoZSBvYmplY3Qgc3RhdGVcclxuXHRcdC8vXHJcblxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duUm90YXRlKCBldmVudCApIHtcclxuXHJcblx0XHRcdHJvdGF0ZVN0YXJ0LnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25Eb2xseSggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRkb2xseVN0YXJ0LnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25QYW4oIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0cGFuU3RhcnQuc2V0KCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZVJvdGF0ZSggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRyb3RhdGVFbmQuc2V0KCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZICk7XHJcblxyXG5cdFx0XHRyb3RhdGVEZWx0YS5zdWJWZWN0b3JzKCByb3RhdGVFbmQsIHJvdGF0ZVN0YXJ0ICkubXVsdGlwbHlTY2FsYXIoIHNjb3BlLnJvdGF0ZVNwZWVkICk7XHJcblxyXG5cdFx0XHRjb25zdCBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudDtcclxuXHJcblx0XHRcdHJvdGF0ZUxlZnQoIDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueCAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0ICk7IC8vIHllcywgaGVpZ2h0XHJcblxyXG5cdFx0XHRyb3RhdGVVcCggMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKTtcclxuXHJcblx0XHRcdHJvdGF0ZVN0YXJ0LmNvcHkoIHJvdGF0ZUVuZCApO1xyXG5cclxuXHRcdFx0c2NvcGUudXBkYXRlKCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZURvbGx5KCBldmVudCApIHtcclxuXHJcblx0XHRcdGRvbGx5RW5kLnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xyXG5cclxuXHRcdFx0ZG9sbHlEZWx0YS5zdWJWZWN0b3JzKCBkb2xseUVuZCwgZG9sbHlTdGFydCApO1xyXG5cclxuXHRcdFx0aWYgKCBkb2xseURlbHRhLnkgPiAwICkge1xyXG5cclxuXHRcdFx0XHRkb2xseU91dCggZ2V0Wm9vbVNjYWxlKCkgKTtcclxuXHJcblx0XHRcdH0gZWxzZSBpZiAoIGRvbGx5RGVsdGEueSA8IDAgKSB7XHJcblxyXG5cdFx0XHRcdGRvbGx5SW4oIGdldFpvb21TY2FsZSgpICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkb2xseVN0YXJ0LmNvcHkoIGRvbGx5RW5kICk7XHJcblxyXG5cdFx0XHRzY29wZS51cGRhdGUoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlUGFuKCBldmVudCApIHtcclxuXHJcblx0XHRcdHBhbkVuZC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcclxuXHJcblx0XHRcdHBhbkRlbHRhLnN1YlZlY3RvcnMoIHBhbkVuZCwgcGFuU3RhcnQgKS5tdWx0aXBseVNjYWxhciggc2NvcGUucGFuU3BlZWQgKTtcclxuXHJcblx0XHRcdHBhbiggcGFuRGVsdGEueCwgcGFuRGVsdGEueSApO1xyXG5cclxuXHRcdFx0cGFuU3RhcnQuY29weSggcGFuRW5kICk7XHJcblxyXG5cdFx0XHRzY29wZS51cGRhdGUoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlTW91c2VXaGVlbCggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRpZiAoIGV2ZW50LmRlbHRhWSA8IDAgKSB7XHJcblxyXG5cdFx0XHRcdGRvbGx5SW4oIGdldFpvb21TY2FsZSgpICk7XHJcblxyXG5cdFx0XHR9IGVsc2UgaWYgKCBldmVudC5kZWx0YVkgPiAwICkge1xyXG5cclxuXHRcdFx0XHRkb2xseU91dCggZ2V0Wm9vbVNjYWxlKCkgKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVLZXlEb3duKCBldmVudCApIHtcclxuXHJcblx0XHRcdGxldCBuZWVkc1VwZGF0ZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0c3dpdGNoICggZXZlbnQuY29kZSApIHtcclxuXHJcblx0XHRcdFx0Y2FzZSBzY29wZS5rZXlzLlVQOlxyXG5cdFx0XHRcdFx0cGFuKCAwLCBzY29wZS5rZXlQYW5TcGVlZCApO1xyXG5cdFx0XHRcdFx0bmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2Ugc2NvcGUua2V5cy5CT1RUT006XHJcblx0XHRcdFx0XHRwYW4oIDAsIC0gc2NvcGUua2V5UGFuU3BlZWQgKTtcclxuXHRcdFx0XHRcdG5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlIHNjb3BlLmtleXMuTEVGVDpcclxuXHRcdFx0XHRcdHBhbiggc2NvcGUua2V5UGFuU3BlZWQsIDAgKTtcclxuXHRcdFx0XHRcdG5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlIHNjb3BlLmtleXMuUklHSFQ6XHJcblx0XHRcdFx0XHRwYW4oIC0gc2NvcGUua2V5UGFuU3BlZWQsIDAgKTtcclxuXHRcdFx0XHRcdG5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBuZWVkc1VwZGF0ZSApIHtcclxuXHJcblx0XHRcdFx0Ly8gcHJldmVudCB0aGUgYnJvd3NlciBmcm9tIHNjcm9sbGluZyBvbiBjdXJzb3Iga2V5c1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydFJvdGF0ZSgpIHtcclxuXHJcblx0XHRcdGlmICggcG9pbnRlcnMubGVuZ3RoID09PSAxICkge1xyXG5cclxuXHRcdFx0XHRyb3RhdGVTdGFydC5zZXQoIHBvaW50ZXJzWyAwIF0ucGFnZVgsIHBvaW50ZXJzWyAwIF0ucGFnZVkgKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHggPSAwLjUgKiAoIHBvaW50ZXJzWyAwIF0ucGFnZVggKyBwb2ludGVyc1sgMSBdLnBhZ2VYICk7XHJcblx0XHRcdFx0Y29uc3QgeSA9IDAuNSAqICggcG9pbnRlcnNbIDAgXS5wYWdlWSArIHBvaW50ZXJzWyAxIF0ucGFnZVkgKTtcclxuXHJcblx0XHRcdFx0cm90YXRlU3RhcnQuc2V0KCB4LCB5ICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnRQYW4oKSB7XHJcblxyXG5cdFx0XHRpZiAoIHBvaW50ZXJzLmxlbmd0aCA9PT0gMSApIHtcclxuXHJcblx0XHRcdFx0cGFuU3RhcnQuc2V0KCBwb2ludGVyc1sgMCBdLnBhZ2VYLCBwb2ludGVyc1sgMCBdLnBhZ2VZICk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRjb25zdCB4ID0gMC41ICogKCBwb2ludGVyc1sgMCBdLnBhZ2VYICsgcG9pbnRlcnNbIDEgXS5wYWdlWCApO1xyXG5cdFx0XHRcdGNvbnN0IHkgPSAwLjUgKiAoIHBvaW50ZXJzWyAwIF0ucGFnZVkgKyBwb2ludGVyc1sgMSBdLnBhZ2VZICk7XHJcblxyXG5cdFx0XHRcdHBhblN0YXJ0LnNldCggeCwgeSApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0RG9sbHkoKSB7XHJcblxyXG5cdFx0XHRjb25zdCBkeCA9IHBvaW50ZXJzWyAwIF0ucGFnZVggLSBwb2ludGVyc1sgMSBdLnBhZ2VYO1xyXG5cdFx0XHRjb25zdCBkeSA9IHBvaW50ZXJzWyAwIF0ucGFnZVkgLSBwb2ludGVyc1sgMSBdLnBhZ2VZO1xyXG5cclxuXHRcdFx0Y29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoIGR4ICogZHggKyBkeSAqIGR5ICk7XHJcblxyXG5cdFx0XHRkb2xseVN0YXJ0LnNldCggMCwgZGlzdGFuY2UgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydERvbGx5UGFuKCkge1xyXG5cclxuXHRcdFx0aWYgKCBzY29wZS5lbmFibGVab29tICkgaGFuZGxlVG91Y2hTdGFydERvbGx5KCk7XHJcblxyXG5cdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVBhbiApIGhhbmRsZVRvdWNoU3RhcnRQYW4oKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydERvbGx5Um90YXRlKCkge1xyXG5cclxuXHRcdFx0aWYgKCBzY29wZS5lbmFibGVab29tICkgaGFuZGxlVG91Y2hTdGFydERvbGx5KCk7XHJcblxyXG5cdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVJvdGF0ZSApIGhhbmRsZVRvdWNoU3RhcnRSb3RhdGUoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlUm90YXRlKCBldmVudCApIHtcclxuXHJcblx0XHRcdGlmICggcG9pbnRlcnMubGVuZ3RoID09IDEgKSB7XHJcblxyXG5cdFx0XHRcdHJvdGF0ZUVuZC5zZXQoIGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSApO1xyXG5cclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Y29uc3QgcG9zaXRpb24gPSBnZXRTZWNvbmRQb2ludGVyUG9zaXRpb24oIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHggPSAwLjUgKiAoIGV2ZW50LnBhZ2VYICsgcG9zaXRpb24ueCApO1xyXG5cdFx0XHRcdGNvbnN0IHkgPSAwLjUgKiAoIGV2ZW50LnBhZ2VZICsgcG9zaXRpb24ueSApO1xyXG5cclxuXHRcdFx0XHRyb3RhdGVFbmQuc2V0KCB4LCB5ICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyb3RhdGVEZWx0YS5zdWJWZWN0b3JzKCByb3RhdGVFbmQsIHJvdGF0ZVN0YXJ0ICkubXVsdGlwbHlTY2FsYXIoIHNjb3BlLnJvdGF0ZVNwZWVkICk7XHJcblxyXG5cdFx0XHRjb25zdCBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudDtcclxuXHJcblx0XHRcdHJvdGF0ZUxlZnQoIDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueCAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0ICk7IC8vIHllcywgaGVpZ2h0XHJcblxyXG5cdFx0XHRyb3RhdGVVcCggMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKTtcclxuXHJcblx0XHRcdHJvdGF0ZVN0YXJ0LmNvcHkoIHJvdGF0ZUVuZCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVQYW4oIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0aWYgKCBwb2ludGVycy5sZW5ndGggPT09IDEgKSB7XHJcblxyXG5cdFx0XHRcdHBhbkVuZC5zZXQoIGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSApO1xyXG5cclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Y29uc3QgcG9zaXRpb24gPSBnZXRTZWNvbmRQb2ludGVyUG9zaXRpb24oIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHggPSAwLjUgKiAoIGV2ZW50LnBhZ2VYICsgcG9zaXRpb24ueCApO1xyXG5cdFx0XHRcdGNvbnN0IHkgPSAwLjUgKiAoIGV2ZW50LnBhZ2VZICsgcG9zaXRpb24ueSApO1xyXG5cclxuXHRcdFx0XHRwYW5FbmQuc2V0KCB4LCB5ICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwYW5EZWx0YS5zdWJWZWN0b3JzKCBwYW5FbmQsIHBhblN0YXJ0ICkubXVsdGlwbHlTY2FsYXIoIHNjb3BlLnBhblNwZWVkICk7XHJcblxyXG5cdFx0XHRwYW4oIHBhbkRlbHRhLngsIHBhbkRlbHRhLnkgKTtcclxuXHJcblx0XHRcdHBhblN0YXJ0LmNvcHkoIHBhbkVuZCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVEb2xseSggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRjb25zdCBwb3NpdGlvbiA9IGdldFNlY29uZFBvaW50ZXJQb3NpdGlvbiggZXZlbnQgKTtcclxuXHJcblx0XHRcdGNvbnN0IGR4ID0gZXZlbnQucGFnZVggLSBwb3NpdGlvbi54O1xyXG5cdFx0XHRjb25zdCBkeSA9IGV2ZW50LnBhZ2VZIC0gcG9zaXRpb24ueTtcclxuXHJcblx0XHRcdGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KCBkeCAqIGR4ICsgZHkgKiBkeSApO1xyXG5cclxuXHRcdFx0ZG9sbHlFbmQuc2V0KCAwLCBkaXN0YW5jZSApO1xyXG5cclxuXHRcdFx0ZG9sbHlEZWx0YS5zZXQoIDAsIE1hdGgucG93KCBkb2xseUVuZC55IC8gZG9sbHlTdGFydC55LCBzY29wZS56b29tU3BlZWQgKSApO1xyXG5cclxuXHRcdFx0ZG9sbHlPdXQoIGRvbGx5RGVsdGEueSApO1xyXG5cclxuXHRcdFx0ZG9sbHlTdGFydC5jb3B5KCBkb2xseUVuZCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVEb2xseVBhbiggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVpvb20gKSBoYW5kbGVUb3VjaE1vdmVEb2xseSggZXZlbnQgKTtcclxuXHJcblx0XHRcdGlmICggc2NvcGUuZW5hYmxlUGFuICkgaGFuZGxlVG91Y2hNb3ZlUGFuKCBldmVudCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVEb2xseVJvdGF0ZSggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVpvb20gKSBoYW5kbGVUb3VjaE1vdmVEb2xseSggZXZlbnQgKTtcclxuXHJcblx0XHRcdGlmICggc2NvcGUuZW5hYmxlUm90YXRlICkgaGFuZGxlVG91Y2hNb3ZlUm90YXRlKCBldmVudCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHQvL1xyXG5cdFx0Ly8gZXZlbnQgaGFuZGxlcnMgLSBGU006IGxpc3RlbiBmb3IgZXZlbnRzIGFuZCByZXNldCBzdGF0ZVxyXG5cdFx0Ly9cclxuXHJcblx0XHRmdW5jdGlvbiBvblBvaW50ZXJEb3duKCBldmVudCApIHtcclxuXHJcblx0XHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRpZiAoIHBvaW50ZXJzLmxlbmd0aCA9PT0gMCApIHtcclxuXHJcblx0XHRcdFx0c2NvcGUuZG9tRWxlbWVudC5zZXRQb2ludGVyQ2FwdHVyZSggZXZlbnQucG9pbnRlcklkICk7XHJcblxyXG5cdFx0XHRcdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSApO1xyXG5cdFx0XHRcdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL1xyXG5cclxuXHRcdFx0YWRkUG9pbnRlciggZXZlbnQgKTtcclxuXHJcblx0XHRcdGlmICggZXZlbnQucG9pbnRlclR5cGUgPT09ICd0b3VjaCcgKSB7XHJcblxyXG5cdFx0XHRcdG9uVG91Y2hTdGFydCggZXZlbnQgKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdG9uTW91c2VEb3duKCBldmVudCApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBvblBvaW50ZXJNb3ZlKCBldmVudCApIHtcclxuXHJcblx0XHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRpZiAoIGV2ZW50LnBvaW50ZXJUeXBlID09PSAndG91Y2gnICkge1xyXG5cclxuXHRcdFx0XHRvblRvdWNoTW92ZSggZXZlbnQgKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdG9uTW91c2VNb3ZlKCBldmVudCApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBvblBvaW50ZXJVcCggZXZlbnQgKSB7XHJcblxyXG5cdFx0ICAgIHJlbW92ZVBvaW50ZXIoIGV2ZW50ICk7XHJcblxyXG5cdFx0ICAgIGlmICggcG9pbnRlcnMubGVuZ3RoID09PSAwICkge1xyXG5cclxuXHRcdCAgICAgICAgc2NvcGUuZG9tRWxlbWVudC5yZWxlYXNlUG9pbnRlckNhcHR1cmUoIGV2ZW50LnBvaW50ZXJJZCApO1xyXG5cclxuXHRcdCAgICAgICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlICk7XHJcblx0XHQgICAgICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwICk7XHJcblxyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgc2NvcGUuZGlzcGF0Y2hFdmVudCggX2VuZEV2ZW50ICk7XHJcblxyXG5cdFx0ICAgIHN0YXRlID0gU1RBVEUuTk9ORTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gb25Qb2ludGVyQ2FuY2VsKCBldmVudCApIHtcclxuXHJcblx0XHRcdHJlbW92ZVBvaW50ZXIoIGV2ZW50ICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIG9uTW91c2VEb3duKCBldmVudCApIHtcclxuXHJcblx0XHRcdGxldCBtb3VzZUFjdGlvbjtcclxuXHJcblx0XHRcdHN3aXRjaCAoIGV2ZW50LmJ1dHRvbiApIHtcclxuXHJcblx0XHRcdFx0Y2FzZSAwOlxyXG5cclxuXHRcdFx0XHRcdG1vdXNlQWN0aW9uID0gc2NvcGUubW91c2VCdXR0b25zLkxFRlQ7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Y2FzZSAxOlxyXG5cclxuXHRcdFx0XHRcdG1vdXNlQWN0aW9uID0gc2NvcGUubW91c2VCdXR0b25zLk1JRERMRTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlIDI6XHJcblxyXG5cdFx0XHRcdFx0bW91c2VBY3Rpb24gPSBzY29wZS5tb3VzZUJ1dHRvbnMuUklHSFQ7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHJcblx0XHRcdFx0XHRtb3VzZUFjdGlvbiA9IC0gMTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHN3aXRjaCAoIG1vdXNlQWN0aW9uICkge1xyXG5cclxuXHRcdFx0XHRjYXNlIE1PVVNFLkRPTExZOlxyXG5cclxuXHRcdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0aGFuZGxlTW91c2VEb3duRG9sbHkoIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0c3RhdGUgPSBTVEFURS5ET0xMWTtcclxuXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Y2FzZSBNT1VTRS5ST1RBVEU6XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuc2hpZnRLZXkgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0XHRoYW5kbGVNb3VzZURvd25QYW4oIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlBBTjtcclxuXHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlICkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHRcdFx0aGFuZGxlTW91c2VEb3duUm90YXRlKCBldmVudCApO1xyXG5cclxuXHRcdFx0XHRcdFx0c3RhdGUgPSBTVEFURS5ST1RBVEU7XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlIE1PVVNFLlBBTjpcclxuXHJcblx0XHRcdFx0XHRpZiAoIGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSApIHtcclxuXHJcblx0XHRcdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRcdFx0XHRcdGhhbmRsZU1vdXNlRG93blJvdGF0ZSggZXZlbnQgKTtcclxuXHJcblx0XHRcdFx0XHRcdHN0YXRlID0gU1RBVEUuUk9UQVRFO1xyXG5cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0XHRoYW5kbGVNb3VzZURvd25QYW4oIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlBBTjtcclxuXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblxyXG5cdFx0XHRcdFx0c3RhdGUgPSBTVEFURS5OT05FO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBzdGF0ZSAhPT0gU1RBVEUuTk9ORSApIHtcclxuXHJcblx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggX3N0YXJ0RXZlbnQgKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gb25Nb3VzZU1vdmUoIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRcdHN3aXRjaCAoIHN0YXRlICkge1xyXG5cclxuXHRcdFx0XHRjYXNlIFNUQVRFLlJPVEFURTpcclxuXHJcblx0XHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0aGFuZGxlTW91c2VNb3ZlUm90YXRlKCBldmVudCApO1xyXG5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlIFNUQVRFLkRPTExZOlxyXG5cclxuXHRcdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0aGFuZGxlTW91c2VNb3ZlRG9sbHkoIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2UgU1RBVEUuUEFOOlxyXG5cclxuXHRcdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRcdFx0XHRoYW5kbGVNb3VzZU1vdmVQYW4oIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIG9uTW91c2VXaGVlbCggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlIHx8IHN0YXRlICE9PSBTVEFURS5OT05FICkgcmV0dXJuO1xyXG5cclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIF9zdGFydEV2ZW50ICk7XHJcblxyXG5cdFx0XHRoYW5kbGVNb3VzZVdoZWVsKCBldmVudCApO1xyXG5cclxuXHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggX2VuZEV2ZW50ICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIG9uS2V5RG93biggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRoYW5kbGVLZXlEb3duKCBldmVudCApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBvblRvdWNoU3RhcnQoIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0dHJhY2tQb2ludGVyKCBldmVudCApO1xyXG5cclxuXHRcdFx0c3dpdGNoICggcG9pbnRlcnMubGVuZ3RoICkge1xyXG5cclxuXHRcdFx0XHRjYXNlIDE6XHJcblxyXG5cdFx0XHRcdFx0c3dpdGNoICggc2NvcGUudG91Y2hlcy5PTkUgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRjYXNlIFRPVUNILlJPVEFURTpcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlICkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHN0YXRlID0gU1RBVEUuVE9VQ0hfUk9UQVRFO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRcdGNhc2UgVE9VQ0guUEFOOlxyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0XHRcdGhhbmRsZVRvdWNoU3RhcnRQYW4oKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0c3RhdGUgPSBTVEFURS5UT1VDSF9QQU47XHJcblxyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcclxuXHJcblx0XHRcdFx0XHRcdFx0c3RhdGUgPSBTVEFURS5OT05FO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Y2FzZSAyOlxyXG5cclxuXHRcdFx0XHRcdHN3aXRjaCAoIHNjb3BlLnRvdWNoZXMuVFdPICkge1xyXG5cclxuXHRcdFx0XHRcdFx0Y2FzZSBUT1VDSC5ET0xMWV9QQU46XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgJiYgc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRcdFx0XHRcdFx0aGFuZGxlVG91Y2hTdGFydERvbGx5UGFuKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHN0YXRlID0gU1RBVEUuVE9VQ0hfRE9MTFlfUEFOO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRcdGNhc2UgVE9VQ0guRE9MTFlfUk9UQVRFOlxyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlICYmIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0XHRcdGhhbmRsZVRvdWNoU3RhcnREb2xseVJvdGF0ZSgpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlRPVUNIX0RPTExZX1JPVEFURTtcclxuXHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxyXG5cclxuXHRcdFx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLk5PTkU7XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cclxuXHRcdFx0XHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggc3RhdGUgIT09IFNUQVRFLk5PTkUgKSB7XHJcblxyXG5cdFx0XHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIF9zdGFydEV2ZW50ICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKCBldmVudCApIHtcclxuXHJcblx0XHRcdHRyYWNrUG9pbnRlciggZXZlbnQgKTtcclxuXHJcblx0XHRcdHN3aXRjaCAoIHN0YXRlICkge1xyXG5cclxuXHRcdFx0XHRjYXNlIFNUQVRFLlRPVUNIX1JPVEFURTpcclxuXHJcblx0XHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0aGFuZGxlVG91Y2hNb3ZlUm90YXRlKCBldmVudCApO1xyXG5cclxuXHRcdFx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xyXG5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlIFNUQVRFLlRPVUNIX1BBTjpcclxuXHJcblx0XHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0aGFuZGxlVG91Y2hNb3ZlUGFuKCBldmVudCApO1xyXG5cclxuXHRcdFx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xyXG5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjYXNlIFNUQVRFLlRPVUNIX0RPTExZX1BBTjpcclxuXHJcblx0XHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlICYmIHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0aGFuZGxlVG91Y2hNb3ZlRG9sbHlQYW4oIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0c2NvcGUudXBkYXRlKCk7XHJcblxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGNhc2UgU1RBVEUuVE9VQ0hfRE9MTFlfUk9UQVRFOlxyXG5cclxuXHRcdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgJiYgc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRcdFx0XHRoYW5kbGVUb3VjaE1vdmVEb2xseVJvdGF0ZSggZXZlbnQgKTtcclxuXHJcblx0XHRcdFx0XHRzY29wZS51cGRhdGUoKTtcclxuXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHJcblx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLk5PTkU7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIG9uQ29udGV4dE1lbnUoIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGFkZFBvaW50ZXIoIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0cG9pbnRlcnMucHVzaCggZXZlbnQgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlUG9pbnRlciggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRkZWxldGUgcG9pbnRlclBvc2l0aW9uc1sgZXZlbnQucG9pbnRlcklkIF07XHJcblxyXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBwb2ludGVycy5sZW5ndGg7IGkgKysgKSB7XHJcblxyXG5cdFx0XHRcdGlmICggcG9pbnRlcnNbIGkgXS5wb2ludGVySWQgPT0gZXZlbnQucG9pbnRlcklkICkge1xyXG5cclxuXHRcdFx0XHRcdHBvaW50ZXJzLnNwbGljZSggaSwgMSApO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRyYWNrUG9pbnRlciggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRsZXQgcG9zaXRpb24gPSBwb2ludGVyUG9zaXRpb25zWyBldmVudC5wb2ludGVySWQgXTtcclxuXHJcblx0XHRcdGlmICggcG9zaXRpb24gPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdFx0cG9zaXRpb24gPSBuZXcgVmVjdG9yMigpO1xyXG5cdFx0XHRcdHBvaW50ZXJQb3NpdGlvbnNbIGV2ZW50LnBvaW50ZXJJZCBdID0gcG9zaXRpb247XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwb3NpdGlvbi5zZXQoIGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRTZWNvbmRQb2ludGVyUG9zaXRpb24oIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0Y29uc3QgcG9pbnRlciA9ICggZXZlbnQucG9pbnRlcklkID09PSBwb2ludGVyc1sgMCBdLnBvaW50ZXJJZCApID8gcG9pbnRlcnNbIDEgXSA6IHBvaW50ZXJzWyAwIF07XHJcblxyXG5cdFx0XHRyZXR1cm4gcG9pbnRlclBvc2l0aW9uc1sgcG9pbnRlci5wb2ludGVySWQgXTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly9cclxuXHJcblx0XHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdjb250ZXh0bWVudScsIG9uQ29udGV4dE1lbnUgKTtcclxuXHJcblx0XHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24gKTtcclxuXHRcdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJjYW5jZWwnLCBvblBvaW50ZXJDYW5jZWwgKTtcclxuXHRcdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3doZWVsJywgb25Nb3VzZVdoZWVsLCB7IHBhc3NpdmU6IGZhbHNlIH0gKTtcclxuXHJcblx0XHQvLyBmb3JjZSBhbiB1cGRhdGUgYXQgc3RhcnRcclxuXHJcblx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cclxuXHR9XHJcblxyXG59XHJcblxyXG5cclxuLy8gVGhpcyBzZXQgb2YgY29udHJvbHMgcGVyZm9ybXMgb3JiaXRpbmcsIGRvbGx5aW5nICh6b29taW5nKSwgYW5kIHBhbm5pbmcuXHJcbi8vIFVubGlrZSBUcmFja2JhbGxDb250cm9scywgaXQgbWFpbnRhaW5zIHRoZSBcInVwXCIgZGlyZWN0aW9uIG9iamVjdC51cCAoK1kgYnkgZGVmYXVsdCkuXHJcbi8vIFRoaXMgaXMgdmVyeSBzaW1pbGFyIHRvIE9yYml0Q29udHJvbHMsIGFub3RoZXIgc2V0IG9mIHRvdWNoIGJlaGF2aW9yXHJcbi8vXHJcbi8vICAgIE9yYml0IC0gcmlnaHQgbW91c2UsIG9yIGxlZnQgbW91c2UgKyBjdHJsL21ldGEvc2hpZnRLZXkgLyB0b3VjaDogdHdvLWZpbmdlciByb3RhdGVcclxuLy8gICAgWm9vbSAtIG1pZGRsZSBtb3VzZSwgb3IgbW91c2V3aGVlbCAvIHRvdWNoOiB0d28tZmluZ2VyIHNwcmVhZCBvciBzcXVpc2hcclxuLy8gICAgUGFuIC0gbGVmdCBtb3VzZSwgb3IgYXJyb3cga2V5cyAvIHRvdWNoOiBvbmUtZmluZ2VyIG1vdmVcclxuXHJcbmNsYXNzIE1hcENvbnRyb2xzIGV4dGVuZHMgT3JiaXRDb250cm9scyB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCBvYmplY3QsIGRvbUVsZW1lbnQgKSB7XHJcblxyXG5cdFx0c3VwZXIoIG9iamVjdCwgZG9tRWxlbWVudCApO1xyXG5cclxuXHRcdHRoaXMuc2NyZWVuU3BhY2VQYW5uaW5nID0gZmFsc2U7IC8vIHBhbiBvcnRob2dvbmFsIHRvIHdvcmxkLXNwYWNlIGRpcmVjdGlvbiBjYW1lcmEudXBcclxuXHJcblx0XHR0aGlzLm1vdXNlQnV0dG9ucy5MRUZUID0gTU9VU0UuUEFOO1xyXG5cdFx0dGhpcy5tb3VzZUJ1dHRvbnMuUklHSFQgPSBNT1VTRS5ST1RBVEU7XHJcblxyXG5cdFx0dGhpcy50b3VjaGVzLk9ORSA9IFRPVUNILlBBTjtcclxuXHRcdHRoaXMudG91Y2hlcy5UV08gPSBUT1VDSC5ET0xMWV9ST1RBVEU7XHJcblxyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IE9yYml0Q29udHJvbHMsIE1hcENvbnRyb2xzIH07XHJcbiIsIi8vIEFsbCByaWdodHMgcmVzZXJ2ZWQgYnkgWW9uXHJcbi8vIFJlbmRlcmVyLmpzIFxyXG4vLyBNYW5hZ2VyIHRoZSBUSEVFLkpTIFJlbmRlcmVyIENyZWF0ZVxyXG5cclxuaW1wb3J0IEV4cGVyaWVuY2UgZnJvbSBcIi4vRXhwZXJpZW5jZVwiXHJcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCJ0aHJlZVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmV4cGVyaWVuY2UgPSBuZXcgRXhwZXJpZW5jZSgpXHJcbiAgICAgICAgdGhpcy5zaXplcyA9IHRoaXMuZXhwZXJpZW5jZS5zaXplc1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSB0aGlzLmV4cGVyaWVuY2Uuc2NlbmVcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IHRoaXMuZXhwZXJpZW5jZS5jYW52YXNcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IHRoaXMuZXhwZXJpZW5jZS5jYW1lcmFcclxuXHJcbiAgICAgICAgdGhpcy5zZXRJbnN0YW5jZSgpXHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHtcclxuICAgICAgICAgICAgY2FudmFzOiB0aGlzLmNhbnZhcyxcclxuICAgICAgICAgICAgYW50aWFsaWFzOiB0cnVlLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5vdXRwdXRFbmNvZGluZyA9IFRIUkVFLnNSR0JFbmNvZGluZztcclxuICAgICAgICB0aGlzLmluc3RhbmNlLnRvbmVNYXBwaW5nID0gVEhSRUUuUmVpbmhhcmRUb25lTWFwcGluZztcclxuICAgICAgICB0aGlzLmluc3RhbmNlLnNoYWRvd01hcC5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLnNoYWRvd01hcC50eXBlID0gVEhSRUUuUENGU29mdFNoYWRvd01hcDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLnNldENsZWFyQ29sb3IoJyMyMTFkMjAnKVxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0U2l6ZSh0aGlzLnNpemVzLndpZHRoLHRoaXMuc2l6ZXMuaGVpZ2h0KVxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0UGl4ZWxSYXRpbyh0aGlzLnNpemVzLnBpeGVsUmF0aW8pXHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplKCl7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXRTaXplKHRoaXMuc2l6ZXMud2lkdGgsdGhpcy5zaXplcy5oZWlnaHQpXHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXRQaXhlbFJhdGlvKHRoaXMuc2l6ZXMucGl4ZWxSYXRpbylcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKXtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLnJlbmRlcih0aGlzLnNjZW5lLHRoaXMuY2FtZXJhLmluc3RhbmNlKVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIGRhdCBmcm9tICdkYXQuZ3VpJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVidWd7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gd2luZG93LmxvY2F0aW9uLmhhc2ggPT09JyNkZWJ1ZydcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkRlYnVnTW9kZTpcIit0aGlzLmFjdGl2ZSlcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy51aSA9IG5ldyBkYXQuR1VJKClcclxuICAgICAgICB9ICAgICAgIFxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRFbWl0dGVyXHJcbntcclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHt9XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MuYmFzZSA9IHt9XHJcbiAgICB9XHJcblxyXG4gICAgb24oX25hbWVzLCBjYWxsYmFjaylcclxuICAgIHtcclxuICAgICAgICAvLyBFcnJvcnNcclxuICAgICAgICBpZih0eXBlb2YgX25hbWVzID09PSAndW5kZWZpbmVkJyB8fCBfbmFtZXMgPT09ICcnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCd3cm9uZyBuYW1lcycpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodHlwZW9mIGNhbGxiYWNrID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybignd3JvbmcgY2FsbGJhY2snKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlc29sdmUgbmFtZXNcclxuICAgICAgICBjb25zdCBuYW1lcyA9IHRoaXMucmVzb2x2ZU5hbWVzKF9uYW1lcylcclxuXHJcbiAgICAgICAgLy8gRWFjaCBuYW1lXHJcbiAgICAgICAgbmFtZXMuZm9yRWFjaCgoX25hbWUpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBSZXNvbHZlIG5hbWVcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMucmVzb2x2ZU5hbWUoX25hbWUpXHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgbmFtZXNwYWNlIGlmIG5vdCBleGlzdFxyXG4gICAgICAgICAgICBpZighKHRoaXMuY2FsbGJhY2tzWyBuYW1lLm5hbWVzcGFjZSBdIGluc3RhbmNlb2YgT2JqZWN0KSlcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzWyBuYW1lLm5hbWVzcGFjZSBdID0ge31cclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjYWxsYmFjayBpZiBub3QgZXhpc3RcclxuICAgICAgICAgICAgaWYoISh0aGlzLmNhbGxiYWNrc1sgbmFtZS5uYW1lc3BhY2UgXVsgbmFtZS52YWx1ZSBdIGluc3RhbmNlb2YgQXJyYXkpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbIG5hbWUubmFtZXNwYWNlIF1bIG5hbWUudmFsdWUgXSA9IFtdXHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgY2FsbGJhY2tcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbIG5hbWUubmFtZXNwYWNlIF1bIG5hbWUudmFsdWUgXS5wdXNoKGNhbGxiYWNrKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgb2ZmKF9uYW1lcylcclxuICAgIHtcclxuICAgICAgICAvLyBFcnJvcnNcclxuICAgICAgICBpZih0eXBlb2YgX25hbWVzID09PSAndW5kZWZpbmVkJyB8fCBfbmFtZXMgPT09ICcnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCd3cm9uZyBuYW1lJylcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXNvbHZlIG5hbWVzXHJcbiAgICAgICAgY29uc3QgbmFtZXMgPSB0aGlzLnJlc29sdmVOYW1lcyhfbmFtZXMpXHJcblxyXG4gICAgICAgIC8vIEVhY2ggbmFtZVxyXG4gICAgICAgIG5hbWVzLmZvckVhY2goKF9uYW1lKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gUmVzb2x2ZSBuYW1lXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLnJlc29sdmVOYW1lKF9uYW1lKVxyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIG5hbWVzcGFjZVxyXG4gICAgICAgICAgICBpZihuYW1lLm5hbWVzcGFjZSAhPT0gJ2Jhc2UnICYmIG5hbWUudmFsdWUgPT09ICcnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jYWxsYmFja3NbIG5hbWUubmFtZXNwYWNlIF1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHNwZWNpZmljIGNhbGxiYWNrIGluIG5hbWVzcGFjZVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIERlZmF1bHRcclxuICAgICAgICAgICAgICAgIGlmKG5hbWUubmFtZXNwYWNlID09PSAnYmFzZScpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHJlbW92ZSBmcm9tIGVhY2ggbmFtZXNwYWNlXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGNvbnN0IG5hbWVzcGFjZSBpbiB0aGlzLmNhbGxiYWNrcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY2FsbGJhY2tzWyBuYW1lc3BhY2UgXSBpbnN0YW5jZW9mIE9iamVjdCAmJiB0aGlzLmNhbGxiYWNrc1sgbmFtZXNwYWNlIF1bIG5hbWUudmFsdWUgXSBpbnN0YW5jZW9mIEFycmF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jYWxsYmFja3NbIG5hbWVzcGFjZSBdWyBuYW1lLnZhbHVlIF1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbmFtZXNwYWNlIGlmIGVtcHR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihPYmplY3Qua2V5cyh0aGlzLmNhbGxiYWNrc1sgbmFtZXNwYWNlIF0pLmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jYWxsYmFja3NbIG5hbWVzcGFjZSBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lmaWVkIG5hbWVzcGFjZVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmNhbGxiYWNrc1sgbmFtZS5uYW1lc3BhY2UgXSBpbnN0YW5jZW9mIE9iamVjdCAmJiB0aGlzLmNhbGxiYWNrc1sgbmFtZS5uYW1lc3BhY2UgXVsgbmFtZS52YWx1ZSBdIGluc3RhbmNlb2YgQXJyYXkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2FsbGJhY2tzWyBuYW1lLm5hbWVzcGFjZSBdWyBuYW1lLnZhbHVlIF1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG5hbWVzcGFjZSBpZiBlbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKE9iamVjdC5rZXlzKHRoaXMuY2FsbGJhY2tzWyBuYW1lLm5hbWVzcGFjZSBdKS5sZW5ndGggPT09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhbGxiYWNrc1sgbmFtZS5uYW1lc3BhY2UgXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxuXHJcbiAgICB0cmlnZ2VyKF9uYW1lLCBfYXJncylcclxuICAgIHtcclxuICAgICAgICAvLyBFcnJvcnNcclxuICAgICAgICBpZih0eXBlb2YgX25hbWUgPT09ICd1bmRlZmluZWQnIHx8IF9uYW1lID09PSAnJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybignd3JvbmcgbmFtZScpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpbmFsUmVzdWx0ID0gbnVsbFxyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsXHJcblxyXG4gICAgICAgIC8vIERlZmF1bHQgYXJnc1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSAhKF9hcmdzIGluc3RhbmNlb2YgQXJyYXkpID8gW10gOiBfYXJnc1xyXG5cclxuICAgICAgICAvLyBSZXNvbHZlIG5hbWVzIChzaG91bGQgb24gaGF2ZSBvbmUgZXZlbnQpXHJcbiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLnJlc29sdmVOYW1lcyhfbmFtZSlcclxuXHJcbiAgICAgICAgLy8gUmVzb2x2ZSBuYW1lXHJcbiAgICAgICAgbmFtZSA9IHRoaXMucmVzb2x2ZU5hbWUobmFtZVsgMCBdKVxyXG5cclxuICAgICAgICAvLyBEZWZhdWx0IG5hbWVzcGFjZVxyXG4gICAgICAgIGlmKG5hbWUubmFtZXNwYWNlID09PSAnYmFzZScpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBUcnkgdG8gZmluZCBjYWxsYmFjayBpbiBlYWNoIG5hbWVzcGFjZVxyXG4gICAgICAgICAgICBmb3IoY29uc3QgbmFtZXNwYWNlIGluIHRoaXMuY2FsbGJhY2tzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrc1sgbmFtZXNwYWNlIF0gaW5zdGFuY2VvZiBPYmplY3QgJiYgdGhpcy5jYWxsYmFja3NbIG5hbWVzcGFjZSBdWyBuYW1lLnZhbHVlIF0gaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1sgbmFtZXNwYWNlIF1bIG5hbWUudmFsdWUgXS5mb3JFYWNoKGZ1bmN0aW9uKGNhbGxiYWNrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2suYXBwbHkodGhpcywgYXJncylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBmaW5hbFJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsUmVzdWx0ID0gcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTcGVjaWZpZWQgbmFtZXNwYWNlXHJcbiAgICAgICAgZWxzZSBpZih0aGlzLmNhbGxiYWNrc1sgbmFtZS5uYW1lc3BhY2UgXSBpbnN0YW5jZW9mIE9iamVjdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKG5hbWUudmFsdWUgPT09ICcnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3dyb25nIG5hbWUnKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbIG5hbWUubmFtZXNwYWNlIF1bIG5hbWUudmFsdWUgXS5mb3JFYWNoKGZ1bmN0aW9uKGNhbGxiYWNrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBmaW5hbFJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxSZXN1bHQgPSByZXN1bHRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmaW5hbFJlc3VsdFxyXG4gICAgfVxyXG5cclxuICAgIHJlc29sdmVOYW1lcyhfbmFtZXMpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IG5hbWVzID0gX25hbWVzXHJcbiAgICAgICAgbmFtZXMgPSBuYW1lcy5yZXBsYWNlKC9bXmEtekEtWjAtOSAsLy5dL2csICcnKVxyXG4gICAgICAgIG5hbWVzID0gbmFtZXMucmVwbGFjZSgvWywvXSsvZywgJyAnKVxyXG4gICAgICAgIG5hbWVzID0gbmFtZXMuc3BsaXQoJyAnKVxyXG5cclxuICAgICAgICByZXR1cm4gbmFtZXNcclxuICAgIH1cclxuXHJcbiAgICByZXNvbHZlTmFtZShuYW1lKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG5ld05hbWUgPSB7fVxyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdCgnLicpXHJcblxyXG4gICAgICAgIG5ld05hbWUub3JpZ2luYWwgID0gbmFtZVxyXG4gICAgICAgIG5ld05hbWUudmFsdWUgICAgID0gcGFydHNbIDAgXVxyXG4gICAgICAgIG5ld05hbWUubmFtZXNwYWNlID0gJ2Jhc2UnIC8vIEJhc2UgbmFtZXNwYWNlXHJcblxyXG4gICAgICAgIC8vIFNwZWNpZmllZCBuYW1lc3BhY2VcclxuICAgICAgICBpZihwYXJ0cy5sZW5ndGggPiAxICYmIHBhcnRzWyAxIF0gIT09ICcnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmV3TmFtZS5uYW1lc3BhY2UgPSBwYXJ0c1sgMSBdXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3TmFtZVxyXG4gICAgfVxyXG59IiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCJcclxuXHJcbmltcG9ydCBFeHBlcmllbmNlIGZyb20gXCIuLi9FeHBlcmllbmNlXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlbHBlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmV4cGVyaWVuY2UgPSBuZXcgRXhwZXJpZW5jZSgpXHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHRoaXMuZXhwZXJpZW5jZS5zY2VuZVxyXG4gICAgICAgIHRoaXMucmVzb3VyY2VzID0gdGhpcy5leHBlcmllbmNlLnJlc291cmNlc1xyXG4gICAgICAgIHRoaXMudGltZSA9IHRoaXMuZXhwZXJpZW5jZS50aW1lXHJcbiAgICAgICAgdGhpcy5kZWJ1ZyA9IHRoaXMuZXhwZXJpZW5jZS5kZWJ1Z1xyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5leHBlcmllbmNlLmNhbWVyYVxyXG5cclxuICAgICAgICBpZih0aGlzLmRlYnVnLmFjdGl2ZSl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYUhlbHBlciA9IG5ldyBUSFJFRS5DYW1lcmFIZWxwZXIoIHRoaXMuY2FtZXJhLmluc3RhbmNlICk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKGNhbWVyYUhlbHBlcilcclxuICAgIFxyXG4gICAgICAgICAgICBjb25zdCBheGVzSGVscGVyID0gbmV3IFRIUkVFLkF4ZXNIZWxwZXIoMTApXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKGF4ZXNIZWxwZXIpXHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMuZXhwZXJpZW5jZS53b3JsZC5lbnZpcm9ubWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnZpcm9ubWVudCA9IHRoaXMuZXhwZXJpZW5jZS53b3JsZC5lbnZpcm9ubWVudFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0SGVscGVyID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnZpcm9ubWVudC5zdW5MaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAwLjJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHRDYW1lcmFIZWxwZXIgPSBuZXcgVEhSRUUuQ2FtZXJhSGVscGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW52aXJvbm1lbnQuc3VuTGlnaHQuc2hhZG93LmNhbWVyYVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodENhbWVyYUhlbHBlcilcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKGRpcmVjdGlvbmFsTGlnaHRIZWxwZXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCJ0aHJlZVwiXHJcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvR0xURkxvYWRlclwiXHJcbmltcG9ydCB7IERSQUNPTG9hZGVyIH0gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0RSQUNPTG9hZGVyXCI7XHJcblxyXG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gXCIuL0V2ZW50RW1pdHRlclwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNvdXJjZXMgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gICAgY29uc3RydWN0b3Ioc291cmNlcykge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzXHJcblxyXG4gICAgICAgIHRoaXMuaXRlbXMgPSB7fVxyXG4gICAgICAgIHRoaXMudG9Mb2FkID0gdGhpcy5zb3VyY2VzLmxlbmd0aFxyXG4gICAgICAgIHRoaXMubG9hZGVkID0gMFxyXG5cclxuICAgICAgICB0aGlzLnNldExvYWRlcnMoKVxyXG4gICAgICAgIHRoaXMuc3RhcnRMb2FkaW5nKClcclxuICAgIH1cclxuXHJcbiAgICBzZXRMb2FkZXJzKCkge1xyXG4gICAgICAgIHRoaXMubG9hZGVycyA9IHt9XHJcbiAgICAgICAgdGhpcy5sb2FkZXJzLmdsdGZMb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpXHJcbiAgICAgICAgdGhpcy5sb2FkZXJzLnRleHR1cmVMb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpXHJcbiAgICAgICAgdGhpcy5sb2FkZXJzLmN1YmVUZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLkN1YmVUZXh0dXJlTG9hZGVyKClcclxuICAgIH1cclxuXHJcbiAgICBzdGFydExvYWRpbmcoKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBzb3VyY2Ugb2YgdGhpcy5zb3VyY2VzKSB7XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2UudHlwZSA9PT0gXCJnbHRmTW9kZWxcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkZXJzLmdsdGZMb2FkZXIubG9hZChzb3VyY2UucGF0aCwgKGZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZUxvYWRlZChzb3VyY2UsIGZpbGUpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2UudHlwZSA9PT0gXCJjdWJlVGV4XCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZGVycy5jdWJlVGV4dHVyZUxvYWRlci5sb2FkKHNvdXJjZS5wYXRoLCAoZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlTG9hZGVkKHNvdXJjZSwgZmlsZSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNvdXJjZS50eXBlID09PSBcInRleFwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRlcnMudGV4dHVyZUxvYWRlci5sb2FkKHNvdXJjZS5wYXRoLCAoZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlTG9hZGVkKHNvdXJjZSwgZmlsZSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc291cmNlTG9hZGVkKHNvdXJjZSwgZmlsZSkge1xyXG4gICAgICAgIHRoaXMuaXRlbXNbc291cmNlLm5hbWVdID0gZmlsZVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHNvdXJjZSwgZmlsZSlcclxuICAgICAgICB0aGlzLmxvYWRlZCsrXHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkID09PSB0aGlzLnRvTG9hZCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJyZWFkeVwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gXCIuL0V2ZW50RW1pdHRlci5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaXplcyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB0aGlzLnBpeGVsUmF0aW8gPSBNYXRoLm1pbih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMilcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGhcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICAgICAgdGhpcy5waXhlbFJhdGlvID0gTWF0aC5taW4od2luZG93LmRldmljZVBpeGVsUmF0aW8sIDIpXHJcblxyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJyZXNpemVcIilcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnLi9FdmVudEVtaXR0ZXIuanMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lIGV4dGVuZHMgRXZlbnRFbWl0dGVyXHJcbntcclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICBzdXBlcigpXHJcblxyXG4gICAgICAgIC8vIFNldHVwXHJcbiAgICAgICAgdGhpcy5zdGFydCA9IERhdGUubm93KClcclxuICAgICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnN0YXJ0XHJcbiAgICAgICAgdGhpcy5lbGFwc2VkID0gMFxyXG4gICAgICAgIHRoaXMuZGVsdGEgPSAxNlxyXG5cclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRpY2soKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgdGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpXHJcbiAgICAgICAgdGhpcy5kZWx0YSA9IGN1cnJlbnRUaW1lIC0gdGhpcy5jdXJyZW50XHJcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gY3VycmVudFRpbWVcclxuICAgICAgICB0aGlzLmVsYXBzZWQgPSB0aGlzLmN1cnJlbnQgLSB0aGlzLnN0YXJ0XHJcblxyXG4gICAgICAgIHRoaXMudHJpZ2dlcigndGljaycpXHJcblxyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGljaygpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsIi8vIEFsbCByaWdodHMgcmVzZXJ2ZWQgYnkgWW9uXHJcbi8vIEF0bGFzLmpzXHJcbi8vIE1hbmFnZXIgdGhlIGJhc2ljIGF0bGFzIHJlbmRlcmVyXHJcblxyXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIlxyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcInRocmVlXCJcclxuXHJcbmltcG9ydCBFeHBlcmllbmNlIGZyb20gXCIuLi8uLi9FeHBlcmllbmNlXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF0bGFzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXhwZXJpZW5jZSA9IG5ldyBFeHBlcmllbmNlKClcclxuICAgICAgICB0aGlzLnNjZW5lID0gdGhpcy5leHBlcmllbmNlLnNjZW5lXHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZXMgPSB0aGlzLmV4cGVyaWVuY2UucmVzb3VyY2VzXHJcbiAgICAgICAgdGhpcy50aW1lID0gdGhpcy5leHBlcmllbmNlLnRpbWVcclxuICAgICAgICB0aGlzLmRlYnVnID0gdGhpcy5leHBlcmllbmNlLmRlYnVnXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnRm9sZGVyID0gdGhpcy5kZWJ1Zy51aS5hZGRGb2xkZXIoXCJBdGxhc1wiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRHZW9tZXRyeSgpXHJcbiAgICAgICAgdGhpcy5zZXRUZXh0dXJlcygpXHJcbiAgICAgICAgdGhpcy5zZXRNYXRlcmlhbCgpXHJcbiAgICAgICAgdGhpcy5zZXRNZXNoKClcclxuICAgIH1cclxuXHJcbiAgICBzZXRHZW9tZXRyeSgpIHtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoMTkxLjYsIDEzMi45LCAyNTYsIDEyOClcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMudXYyID0gdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnV2XHJcbiAgICB9XHJcbiAgICBzZXRUZXh0dXJlcygpIHtcclxuICAgICAgICB0aGlzLnRleHR1cmVzID0ge31cclxuXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlcy5hdGxhcyA9IHRoaXMucmVzb3VyY2VzLml0ZW1zLmF0bGFzXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlcy5hdGxhcy5lbmNvZGluZyA9IFRIUkVFLnNSR0JFbmNvZGluZ1xyXG4gICAgICAgIHRoaXMudGV4dHVyZXMuYXRsYXMucmVwZWF0LnNldCgxLCAxKVxyXG4gICAgICAgIHRoaXMudGV4dHVyZXMuYXRsYXMud3JhcFMgPSBUSFJFRS5SZXBlYXRXcmFwcGluZ1xyXG4gICAgICAgIHRoaXMudGV4dHVyZXMuYXRsYXMud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZ1xyXG5cclxuICAgICAgICB0aGlzLnRleHR1cmVzLm5vcm1hbCA9IHRoaXMucmVzb3VyY2VzLml0ZW1zLmF0bGFzTm9ybWFsXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlcy5ub3JtYWwuZW5jb2RpbmcgPSBUSFJFRS5MaW5lYXJFbmNvZGluZ1xyXG4gICAgICAgIHRoaXMudGV4dHVyZXMubm9ybWFsLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmdcclxuICAgICAgICB0aGlzLnRleHR1cmVzLm5vcm1hbC53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nXHJcblxyXG4gICAgICAgIHRoaXMudGV4dHVyZXMuZGlzcGxhY2VtZW50ID0gdGhpcy5yZXNvdXJjZXMuaXRlbXMuYXRsYXNEaXNwbGFjZW1lbnRcclxuICAgICAgICB0aGlzLnRleHR1cmVzLm5vcm1hbC53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlcy5ub3JtYWwud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZ1xyXG5cclxuICAgICAgICB0aGlzLnRleHR1cmVzLm9jY2x1c2lvbiA9IHRoaXMucmVzb3VyY2VzLml0ZW1zLmF0bGFzT2NjbHVzaW9uXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlcy5ub3JtYWwud3JhcFMgPSBUSFJFRS5SZXBlYXRXcmFwcGluZ1xyXG4gICAgICAgIHRoaXMudGV4dHVyZXMubm9ybWFsLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmdcclxuXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlcy5yb3VnaG5lc3MgPSB0aGlzLnJlc291cmNlcy5pdGVtcy5hdGxhc1JvdWdobmVzc1xyXG4gICAgICAgIHRoaXMudGV4dHVyZXMubm9ybWFsLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmdcclxuICAgICAgICB0aGlzLnRleHR1cmVzLm5vcm1hbC53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nXHJcbiAgICB9XHJcbiAgICBzZXRNYXRlcmlhbCgpIHtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcclxuICAgICAgICAgICAgbWFwOiB0aGlzLnRleHR1cmVzLmF0bGFzLFxyXG4gICAgICAgICAgICBub3JtYWxNYXA6IHRoaXMudGV4dHVyZXMubm9ybWFsLFxyXG4gICAgICAgICAgICBhb01hcDogdGhpcy50ZXh0dXJlcy5vY2NsdXNpb24sXHJcbiAgICAgICAgICAgIGRpc3BsYWNlbWVudE1hcDogdGhpcy50ZXh0dXJlcy5kaXNwbGFjZW1lbnQsXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLmFvTWFwSW50ZW5zaXR5ID0gMzVcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlID0gMS41XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC5ub3JtYWxTY2FsZSA9IG5ldyBUSFJFRS5WZWN0b3IyKDAuMywgMC4zKVxyXG4gICAgfVxyXG4gICAgc2V0TWVzaCgpIHtcclxuICAgICAgICB0aGlzLm1lc2ggPSBuZXcgVEhSRUUuTWVzaCh0aGlzLmdlb21ldHJ5LCB0aGlzLm1hdGVyaWFsKVxyXG4gICAgICAgIHRoaXMubWVzaC5yb3RhdGlvbi54ID0gLU1hdGguUEkgKiAwLjVcclxuICAgICAgICB0aGlzLm1lc2gucmVjZWl2ZVNoYWRvdyA9IHRydWVcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLm1lc2gpXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkge31cclxufVxyXG4iLCIvLyBBbGwgcmlnaHRzIHJlc2VydmVkIGJ5IFlvblxyXG4vLyBGb3guanMgXHJcbi8vIE1hbmFnZXIgdGhlIEZveCBSZXNvdXJjZXNcclxuXHJcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCJ0aHJlZVwiXHJcblxyXG5pbXBvcnQgRXhwZXJpZW5jZSBmcm9tIFwiLi4vLi4vRXhwZXJpZW5jZVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3gge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5leHBlcmllbmNlID0gbmV3IEV4cGVyaWVuY2UoKVxyXG4gICAgICAgIHRoaXMuc2NlbmUgPSB0aGlzLmV4cGVyaWVuY2Uuc2NlbmVcclxuICAgICAgICB0aGlzLnJlc291cmNlcyA9IHRoaXMuZXhwZXJpZW5jZS5yZXNvdXJjZXNcclxuICAgICAgICB0aGlzLnRpbWUgPSB0aGlzLmV4cGVyaWVuY2UudGltZVxyXG4gICAgICAgIHRoaXMuZGVidWcgPSB0aGlzLmV4cGVyaWVuY2UuZGVidWdcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWcuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdGb2xkZXIgPSB0aGlzLmRlYnVnLnVpLmFkZEZvbGRlcihcImZveFwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZSA9IHRoaXMucmVzb3VyY2VzLml0ZW1zLmZveE1vZGVsXHJcblxyXG4gICAgICAgIHRoaXMuc2V0TW9kZWwoKVxyXG4gICAgICAgIHRoaXMuc2V0QW5pbWF0aW9uKClcclxuICAgIH1cclxuXHJcbiAgICBzZXRNb2RlbCgpIHtcclxuICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5yZXNvdXJjZS5zY2VuZVxyXG4gICAgICAgIHRoaXMubW9kZWwuc2NhbGUuc2V0KDAuMDIsIDAuMDIsIDAuMDIpXHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5tb2RlbClcclxuXHJcbiAgICAgICAgdGhpcy5tb2RlbC50cmF2ZXJzZSgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNoaWxkLmNhc3RTaGFkb3cgPSB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHNldEFuaW1hdGlvbigpIHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IHt9XHJcblxyXG4gICAgICAgIC8vIE1peGVyXHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ubWl4ZXIgPSBuZXcgVEhSRUUuQW5pbWF0aW9uTWl4ZXIodGhpcy5tb2RlbClcclxuXHJcbiAgICAgICAgLy8gQWN0aW9uc1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLmFjdGlvbnMgPSB7fVxyXG5cclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5hY3Rpb25zLmlkbGUgPSB0aGlzLmFuaW1hdGlvbi5taXhlci5jbGlwQWN0aW9uKFxyXG4gICAgICAgICAgICB0aGlzLnJlc291cmNlLmFuaW1hdGlvbnNbMF1cclxuICAgICAgICApXHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24uYWN0aW9ucy53YWxraW5nID0gdGhpcy5hbmltYXRpb24ubWl4ZXIuY2xpcEFjdGlvbihcclxuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZS5hbmltYXRpb25zWzFdXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLmFjdGlvbnMucnVubmluZyA9IHRoaXMuYW5pbWF0aW9uLm1peGVyLmNsaXBBY3Rpb24oXHJcbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2UuYW5pbWF0aW9uc1syXVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24uYWN0aW9ucy5jdXJyZW50ID0gdGhpcy5hbmltYXRpb24uYWN0aW9ucy53YWxraW5nXHJcblxyXG4gICAgICAgIC8vIHRoaXMuYW5pbWF0aW9uLmFjdGlvbnMuY3VycmVudC5wbGF5KClcclxuXHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ucGxheSA9IChuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0FjdGlvbiA9IHRoaXMuYW5pbWF0aW9uLmFjdGlvbnNbbmFtZV1cclxuICAgICAgICAgICAgY29uc3Qgb2xkQWN0aW9uID0gdGhpcy5hbmltYXRpb24uYWN0aW9ucy5jdXJyZW50XHJcbiAgICAgICAgICAgIG5ld0FjdGlvbi5yZXNldCgpXHJcbiAgICAgICAgICAgIG5ld0FjdGlvbi5wbGF5KClcclxuICAgICAgICAgICAgbmV3QWN0aW9uLmNyb3NzRmFkZUZyb20ob2xkQWN0aW9uLCAxKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb24uYWN0aW9ucy5jdXJyZW50ID0gbmV3QWN0aW9uXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWJ1Zy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVidWdPYmplY3QgPSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5SWRsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLnBsYXkoXCJpZGxlXCIpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGxheVdhbGtpbmc6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbi5wbGF5KFwid2Fsa2luZ1wiKVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBsYXlSdW5uaW5nOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb24ucGxheShcInJ1bm5pbmdcIilcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0ZvbGRlci5hZGQoZGVidWdPYmplY3QsIFwicGxheUlkbGVcIilcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0ZvbGRlci5hZGQoZGVidWdPYmplY3QsIFwicGxheVdhbGtpbmdcIilcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0ZvbGRlci5hZGQoZGVidWdPYmplY3QsJ3BsYXlSdW5uaW5nJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLm1peGVyLnVwZGF0ZSh0aGlzLnRpbWUuZGVsdGEgKiAwLjAwMSlcclxuICAgIH1cclxufVxyXG4iLCIvLyBBbGwgcmlnaHRzIHJlc2VydmVkIGJ5IFlvblxyXG4vLyBFbnZpcm9ubWVudC5qcyBcclxuLy8gTWFuYWdlciB0aGUgRW52aXJvbm1lbnRcclxuLy8gSW5jbHVkZSBsaWdodCwgZW52aXJNYXBcclxuLy8gSW5jbHVkZSBob3cgZW52aXJNYXAgZWZmZWN0IHRoZSBtYXRlcmlhbCwgaXQgaGFzIGEgbG9vcCBzZXQgZm9yIGV2ZXJ5IG9iamVjdCBpbiBzY2VuZVxyXG5cclxuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCJcclxuXHJcbmltcG9ydCBFeHBlcmllbmNlIGZyb20gXCIuLi9FeHBlcmllbmNlXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudmlyb25tZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXhwZXJpZW5jZSA9IG5ldyBFeHBlcmllbmNlKClcclxuICAgICAgICB0aGlzLnNjZW5lID0gdGhpcy5leHBlcmllbmNlLnNjZW5lXHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZXMgPSB0aGlzLmV4cGVyaWVuY2UucmVzb3VyY2VzXHJcbiAgICAgICAgdGhpcy5kZWJ1ZyA9IHRoaXMuZXhwZXJpZW5jZS5kZWJ1Z1xyXG5cclxuICAgICAgICBpZih0aGlzLmRlYnVnLmFjdGl2ZSl7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdGb2xkZXIgPSB0aGlzLmRlYnVnLnVpLmFkZEZvbGRlcihcImVudmlyb25tZW50XCIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFN1bkxpZ2h0KClcclxuICAgICAgICB0aGlzLnNldEVudmlyb25tZW50TWFwKClcclxuICAgIH1cclxuXHJcbiAgICBzZXRTdW5MaWdodCgpIHtcclxuICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0SW50ZW5zaXR5ID0gMTBcclxuICAgICAgICB0aGlzLnN1bkxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoXHJcbiAgICAgICAgICAgIDB4ZmZmZmZmLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0SW50ZW5zaXR5XHJcbiAgICAgICAgKVxyXG4gICAgICAgIHRoaXMuc3VuTGlnaHQucG9zaXRpb24uc2V0KC00LCA0LCA0KVxyXG4gICAgICAgIHRoaXMuc3VuTGlnaHQuY2FzdFNoYWRvdyA9IHRydWVcclxuICAgICAgICB0aGlzLnN1bkxpZ2h0LnNoYWRvdy5jYW1lcmEuZmFyID0gMTVcclxuICAgICAgICB0aGlzLnN1bkxpZ2h0LnNoYWRvdy5tYXBTaXplLndpZHRoID0gNTEyXHJcbiAgICAgICAgdGhpcy5zdW5MaWdodC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSA1MTJcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5zdW5MaWdodClcclxuXHJcbiAgICAgICAgaWYodGhpcy5kZWJ1Zy5hY3RpdmUpe1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnRm9sZGVyLmFkZCh0aGlzLnN1bkxpZ2h0LFwiaW50ZW5zaXR5XCIpLm5hbWUoJ3N1bkxpZ2h0SW50ZW5zaXR5JykubWluKDApLm1heCgxMCkuc3RlcCgwLjAwMSlcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0ZvbGRlci5hZGQodGhpcy5zdW5MaWdodC5wb3NpdGlvbixcInhcIikubmFtZSgnc3VuTGlnaHRJbnRlbnNpdHknKS5taW4oLTUpLm1heCg1KS5zdGVwKDAuMDAxKVxyXG4gICAgICAgICAgICB0aGlzLmRlYnVnRm9sZGVyLmFkZCh0aGlzLnN1bkxpZ2h0LnBvc2l0aW9uLFwieVwiKS5uYW1lKCdzdW5MaWdodEludGVuc2l0eScpLm1pbigtNSkubWF4KDUpLnN0ZXAoMC4wMDEpXHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdGb2xkZXIuYWRkKHRoaXMuc3VuTGlnaHQucG9zaXRpb24sXCJ6XCIpLm5hbWUoJ3N1bkxpZ2h0SW50ZW5zaXR5JykubWluKC01KS5tYXgoNSkuc3RlcCgwLjAwMSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldEVudmlyb25tZW50TWFwKCkge1xyXG4gICAgICAgIHRoaXMuZW52aXJvbm1lbnRNYXAgPSB7fVxyXG4gICAgICAgIHRoaXMuZW52aXJvbm1lbnRNYXAuaW50ZW5zaXR5ID0gMC4zXHJcbiAgICAgICAgdGhpcy5lbnZpcm9ubWVudE1hcC50ZXh0dXJlID0gdGhpcy5yZXNvdXJjZXMuaXRlbXMuZW52aXJvbm1lbnRNYXBUZXh0dXJlXHJcbiAgICAgICAgdGhpcy5lbnZpcm9ubWVudE1hcC50ZXh0dXJlLmVuY29kaW5nID0gVEhSRUUuc1JHQkVuY29kaW5nXHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUuZW52aXJvbm1lbnQgPSB0aGlzLmVudmlyb25tZW50TWFwLnRleHR1cmVcclxuXHJcbiAgICAgICAgdGhpcy5lbnZpcm9ubWVudE1hcC51cGRhdGVNYXRlcmlhbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS50cmF2ZXJzZSgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2ggJiZcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5lbnZNYXAgPSB0aGlzLmVudmlyb25tZW50TWFwLnRleHR1cmVcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5lbnZNYXBJbnRlbnNpdHkgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVudmlyb25tZW50TWFwLmludGVuc2l0eVxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVudmlyb25tZW50TWFwLnVwZGF0ZU1hdGVyaWFsKClcclxuXHJcbiAgICAgICAgaWYodGhpcy5kZWJ1Zy5hY3RpdmUpe1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnRm9sZGVyLmFkZCh0aGlzLmVudmlyb25tZW50TWFwLFwiaW50ZW5zaXR5XCIpLm5hbWUoJ2Vudk1hcEludGVuc2l0eScpLm1pbigwKS5tYXgoNCkuc3RlcCgwLjAwMSkub25DaGFuZ2UodGhpcy5lbnZpcm9ubWVudE1hcC51cGRhdGVNYXRlcmlhbClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQWxsIHJpZ2h0cyByZXNlcnZlZCBieSBZb25cclxuLy8gd29yZC5qcyBcclxuLy8gTWFuYWdlciB0aGUgcmVuZGVyIHdvcmxkIG91dGxpbmVcclxuXHJcbmltcG9ydCBFeHBlcmllbmNlIGZyb20gXCIuLi9FeHBlcmllbmNlXCJcclxuaW1wb3J0IEVudmlyb25tZW50IGZyb20gXCIuL0Vudmlyb25tZW50XCJcclxuaW1wb3J0IEhlbHBlciBmcm9tIFwiLi4vVXRpbHMvSGVscGVyXCJcclxuXHJcbmltcG9ydCBGb3ggZnJvbSBcIi4vQXRsYXMvRm94XCJcclxuaW1wb3J0IEF0bGFzIGZyb20gXCIuL0F0bGFzL0F0bGFzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdvcmxkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXhwZXJpZW5jZSA9IG5ldyBFeHBlcmllbmNlKClcclxuICAgICAgICB0aGlzLnNjZW5lID0gdGhpcy5leHBlcmllbmNlLnNjZW5lXHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZXMgPSB0aGlzLmV4cGVyaWVuY2UucmVzb3VyY2VzXHJcblxyXG5cclxuICAgICAgICB0aGlzLnJlc291cmNlcy5vbigncmVhZHknLCgpPT57XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzb3VyY2VzIGFyZSByZWFkeVwiKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5mb3ggPSBuZXcgRm94KClcclxuICAgICAgICAgICAgdGhpcy5hdGxhcyA9IG5ldyBBdGxhcygpXHJcbiAgICAgICAgICAgIHRoaXMuZW52aXJvbm1lbnQgPSBuZXcgRW52aXJvbm1lbnQoKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBuZXcgSGVscGVyKClcclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZm94KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm94LnVwZGF0ZSgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCIvLyBBbGwgcmlnaHRzIHJlc2VydmVkIGJ5IFlvblxyXG4vLyBzb3VyY2VzLmpzIFxyXG4vLyBNYW5hZ2VyIHRoZSBhcnQgcmVzb3VyY2VzIGxvYWQgcGF0aCBhbmQgdHlwZSBpbmZvcm1hdGlvblxyXG4vLyBzdXBwb3J0ICp0ZXggKmdsdGZNb2RlbCAqY3ViZVRleFxyXG4vLyBNYW5hZ2VyIEJ5IFJlc291cmNlcy5qc1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgW1xyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiZW52aXJvbm1lbnRNYXBUZXh0dXJlXCIsXHJcbiAgICAgICAgdHlwZTogXCJjdWJlVGV4XCIsXHJcbiAgICAgICAgcGF0aDogW1xyXG4gICAgICAgICAgICBcInRleHR1cmVzL2Vudmlyb25tZW50TWFwcy8wL3B4LmpwZ1wiLFxyXG4gICAgICAgICAgICBcInRleHR1cmVzL2Vudmlyb25tZW50TWFwcy8wL254LmpwZ1wiLFxyXG4gICAgICAgICAgICBcInRleHR1cmVzL2Vudmlyb25tZW50TWFwcy8wL3B5LmpwZ1wiLFxyXG4gICAgICAgICAgICBcInRleHR1cmVzL2Vudmlyb25tZW50TWFwcy8wL255LmpwZ1wiLFxyXG4gICAgICAgICAgICBcInRleHR1cmVzL2Vudmlyb25tZW50TWFwcy8wL3B6LmpwZ1wiLFxyXG4gICAgICAgICAgICBcInRleHR1cmVzL2Vudmlyb25tZW50TWFwcy8wL256LmpwZ1wiLFxyXG4gICAgICAgIF0sXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJmb3hNb2RlbFwiLFxyXG4gICAgICAgIHR5cGU6IFwiZ2x0Zk1vZGVsXCIsXHJcbiAgICAgICAgcGF0aDogXCJtb2RlbHMvRm94L2dsVEYvRm94LmdsdGZcIixcclxuICAgIH0sXHJcblxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiYXRsYXNcIixcclxuICAgICAgICB0eXBlOlwidGV4XCIsXHJcbiAgICAgICAgcGF0aDogXCJ0ZXh0dXJlcy9hdGxhcy9hdGxhc01ldGEucG5nXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJhdGxhc05vcm1hbFwiLFxyXG4gICAgICAgIHR5cGU6IFwidGV4XCIsXHJcbiAgICAgICAgcGF0aDogXCJ0ZXh0dXJlcy9hdGxhcy9ub3JtYWwucG5nXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiYXRsYXNEaXNwbGFjZW1lbnRcIixcclxuICAgICAgICB0eXBlOiBcInRleFwiLFxyXG4gICAgICAgIHBhdGg6IFwidGV4dHVyZXMvYXRsYXMvZGlzcGxhY2VtZW50LnBuZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcImF0bGFzT2NjbHVzaW9uXCIsXHJcbiAgICAgICAgdHlwZTogXCJ0ZXhcIixcclxuICAgICAgICBwYXRoOiBcInRleHR1cmVzL2F0bGFzL29jY2x1c2lvbi5wbmdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJhdGxhc1JvdWdobmVzc1wiLFxyXG4gICAgICAgIHR5cGU6IFwidGV4XCIsXHJcbiAgICAgICAgcGF0aDogXCJ0ZXh0dXJlcy9hdGxhcy9yb3VnaG5lc3MucG5nXCIsXHJcbiAgICB9XHJcbl1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9